<div class="container-fluid" style="height: 100%;">
  <div class="row">

    <div class="col-xl-3" style="padding: 0px;margin: 0px;">
      <div class="card center-screen-side">
      
      <div class="card-box" style="padding: 0px;margin: 0px;">

        <div class="top-card-side-body">

          <div class="app-search">
            <div class="box">
              <div class="container-1">
                  <span class="icon">
                    <!--<i class="fas fa-search"></i>-->
                    <img src="./assets/icon/icon-search.svg" />
                  </span>
                  <input id="search" class="search" [(ngModel)]="searchText" placeholder="Search patient name" />

                  <!--<input type="search" id="search" placeholder="Search patient name" />-->

<!--            
<div class="search-hero">
  <input class="form-control" type="text" name="search" [(ngModel)]="searchText" autocomplete="off" placeholder="&#61442;  Start searching for a hero by id or name or country">
</div>
<table class="table table-striped">
  <thead>
  <tr>
    <th>Id</th>
    <th>Hero Name</th>
    <th>Country</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let inbox of inboxData | filter:searchText">
    <td>{{inbox.sh360Id}}</td>
    <td>{{ inbox.firstName }} </td>
    <td>{{ inbox.lastName }}</td>
  </tr>
  </tbody>
</table> -->                 
              </div>
            </div>
          </div>

        </div>

        <div class="top-card-side-body">
          <div class="box">
            <div class="container-1">
              
            </div>
          </div>
        </div>
 
        <div class="top-card-side-body">

        </div>

        <div class="middel-card-side-body">
                  
          <h4 class="header-title box-title-text"><span style="color:#4A5568;font-weight: 500;font-size: 14px;line-height: 19px;display:none;">{{patientTodayCount}}</span></h4>
        
          
          
          <div class="inbox-widget" appSlimScroll style="min-height: 310px;"> 
            <div *ngFor="let patientInfo of patientlistData | filter : searchText">
            <div id="userlist" class="inbox-item" *ngIf=" patientInfo.firstName ">
              
              <!--<a href="javascript:void(0);" (click)="showResourceDataByType('medications',patientInfo.patientId)" [class.selected]="CurrentUserSelected == patientInfo.patientId">
                <p class="inbox-item-author">
                  {{ patientInfo.firstName | titlecase }} {{ patientInfo.lastName | titlecase }}
                  <span class="userNewMessageCount" *ngIf=" patientInfo.unread ">{{patientInfo.unreadCount}}</span>
                </p>
              </a>-->
              
              <a href="javascript:void(0);" (click)="showChatBox(patientInfo.patientId)" [class.selected]="CurrentUserSelected == patientInfo.patientId">
                <p class="inbox-item-author">
                  {{ patientInfo.firstName | titlecase }} {{ patientInfo.lastName | titlecase }}
                  <span class="userNewMessageCount" *ngIf=" patientInfo.unread ">{{patientInfo.unreadCount}}</span>
                </p>
              </a>
             </div>
            </div>
            <div *ngFor="let patientInfo of patientlistDataContact | filter : searchText">
              <div id="userlist" class="inbox-item" *ngIf=" patientInfo.firstName ">
                
                <!--<a href="javascript:void(0);" (click)="showResourceDataByType('medications',patientInfo.patientId)" [class.selected]="CurrentUserSelected == patientInfo.patientId">
                  <p class="inbox-item-author">
                    {{ patientInfo.firstName | titlecase }} {{ patientInfo.lastName | titlecase }}
                    <span class="userNewMessageCount" *ngIf=" patientInfo.unread ">{{patientInfo.unreadCount}}</span>
                  </p>
                </a>-->
                
                <a href="javascript:void(0);" (click)="showChatBox(patientInfo.sh360Id)" [class.selected]="CurrentUserSelected == patientInfo.sh360Id">
                  <p class="inbox-item-author">
                    {{ patientInfo.firstName | titlecase }} {{ patientInfo.lastName | titlecase }}
                  </p>
                </a>
               </div>
              </div>

            <!--<ul>
              <li *ngFor="let inbox of projectData | filter : searchText">
                {{ inbox.id }} {{ inbox.name }}
              </li>
            </ul>-->
            
            <!--<div id="userlist" class="inbox-item" *ngFor="let inbox of inboxData | filter : searchText">
              <a href="javascript:void(0);" (click)="showResourceDataByType('medications',inbox.sh360Id)" [class.selected]="CurrentUserSelected == inbox.sh360Id">
                <p class="inbox-item-author">{{ inbox.firstName | titlecase }} {{ inbox.lastName | titlecase }}</p>
              </a>
             </div>-->
            <!--<div id="userlist" class="inbox-item" *ngFor="let inbox of projectData | filter : searchText">
              <a href="javascript:void(0);">
                <p class="inbox-item-author">{{ inbox.name | titlecase }}</p>
              </a>
             </div>-->

             <!--
             <div id="userlist" class="inbox-item" *ngFor="let inbox of inboxData | filter : searchText">
              <a href="javascript:void(0);" (click)="showResourceDataByType('medications',inbox.sh360Id)" [class.selected]="CurrentUserSelected == inbox.sh360Id">
                <div class="inbox-item-img"><img src="assets/images/users/sh360-noprofile.png" class="rounded-circle" alt=""></div>
                <p class="inbox-item-author">{{ inbox.firstName | titlecase }} {{ inbox.lastName | titlecase }}</p>
                <p>{{inbox.sh360Id}}</p>
              </a>
             </div>
             -->
            <!--<ul>
              <li *ngFor="let inbox of inboxData | filter : searchText">
                {{inbox.sh360Id}}
                <a href="javascript:void(0);" (click)="showResourceDataByType('medications',inbox.sh360Id)">
                  <div class="inbox-item-img"><img src="assets/images/users/sh360-noprofile.png" class="rounded-circle" alt=""></div>
                  <p class="inbox-item-author">{{ inbox.firstName }} {{ inbox.lastName }}</p> 
                  <p>{{inbox.sh360Id}}</p>
                </a>
              </li>
            </ul>-->
           
            <!--
            <div class="inbox-item" *ngFor="let inbox of inboxData">
              <a href="javascript:void(0);" (click)="showResourceDataByType('medications',inbox.sh360Id)">
                <div class="inbox-item-img"><img src="assets/images/users/sh360-noprofile.png" class="rounded-circle" alt=""></div>
                <p class="inbox-item-author">{{ inbox.firstName }} {{ inbox.lastName }}</p> 
                <p>{{inbox.sh360Id}}</p>
              </a>
            </div>
            -->
            <!--
              <div class="inbox-item" *ngFor="let inbox of inboxData">
                <a href="javascript:void(0);" (click)="showResourceDataByType('medications',inbox.id)">
                  <div class="inbox-item-img"><img src="{{inbox.image}}" class="rounded-circle" alt=""></div>
                  <p class="inbox-item-author">{{ inbox.name }}</p> 
                </a>
              </div>
            -->
              
          </div>

  

        </div>
        
        <div class="bottom-card-side-body">

          <!--<span>This messaging/chat is protected</span>-->

        </div>
      </div>
    </div>

 
    </div>
 

    <div class="col-xl-9">

      
      <!--<div #divMessages>xxxxx</div> -->
      

      <div class="card center-screen-main" style="margin: 10px 0px; padding:10px 0px;">
        <div class="message-card-body" >

          <div id="message-box-0" class="card-body" *ngIf=" MessageBox ">

            <div class="center-screen-mid" >
              <!--<div>
                <img src="./assets/icon/medication-icon.svg" style="width: 100px;padding: 20px;" />
              </div>-->
              <p>
                Click on one of the patient to see the conversation
              </p>
            </div>

          </div>


          <div id="MedicalData" *ngIf=" !MessageBox ">
            <!--

            <ul class="nav nav-tabs">
              <li class="active"><a data-toggle="tab" (click)="showResourceDataByType('medications',inbox.id)" routerLink="/crm/seeallresult/medications/history"> Medications </a></li>
              <li><a data-toggle="tab"  (click)="showResourceDataByType('encounters',inbox.id)" routerLink="/crm/seeallresult/encounters/history"> Visits </a></li>
              <li><a data-toggle="tab" (click)="showResourceDataByType('allergies',inbox.id)" routerLink="/crm/seeallresult/allergies/history"> Allergies </a></li>
              <li><a data-toggle="tab" (click)="showResourceDataByType('immunizations',inbox.id)" routerLink="/crm/seeallresult/immunizations/history"> Immunizations </a></li>
              <li><a data-toggle="tab" (click)="showResourceDataByType('procedures',inbox.id)" routerLink="/crm/seeallresult/procedures/history"> Procedures </a></li>
              <li><a data-toggle="tab" (click)="showResourceDataByType('observations',inbox.id)" routerLink="/crm/seeallresult/observations/history"> Vitals </a></li>
              <li><a data-toggle="tab" (click)="showResourceDataByType('encounters',inbox.id)" routerLink="/crm/seeallresult/encounters/history"> Lab Report</a></li>
            </ul>

            -->
            
            <ul id="nav-tabs" class="nav nav-tabs">
              
              <li [class.selected]="CurrentTabPage == 'message'">
                <a data-toggle="tab" (click)="showChatBox(patientId)" href="javascript:void(0);">
                <img src="./assets/icon/icon-message_on.svg" class="active" />
                <img src="./assets/icon/icon-message_off.svg" class="inactive" />
                <span style="padding-left:20px;">My Messages</span>
              </a>              
              </li>              
              <li [class.selected]="CurrentTabPage == 'medications'">
                <a data-toggle="tab" (click)="showResourceDataByType('medications',patientId)" href="javascript:void(0);">
                <img src="./assets/icon/icon-reminder_on.svg" class="active" />
                <img src="./assets/icon/icon-reminder_off.svg" class="inactive" />
                <span style="padding-left:20px;">Medication</span>
                </a>
              </li>              
              <li [class.selected]="CurrentTabPage == 'labreports'">
                <a data-toggle="tab" (click)="showResourceDataByType('labreports',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-lab_on.svg" class="active" />
                <img src="./assets/icon/icon-lab_off.svg" class="inactive" />
                <span style="padding-left:20px;">Lab Report</span>
                </a>
              </li>
              <li [class.selected]="CurrentTabPage == 'encounters'">
                <a data-toggle="tab"  (click)="showResourceDataByType('encounters',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-visit_on.svg" class="active" />
                <img src="./assets/icon/icon-visit_off.svg" class="inactive" />
                <span style="padding-left:20px;">Visits</span>
                </a>
              </li>
              <li [class.selected]="CurrentTabPage == 'allergies'">
                <a data-toggle="tab" (click)="showResourceDataByType('allergies',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-allergy_on.svg" class="active" />
                <img src="./assets/icon/icon-allergy_off.svg" class="inactive" />
                <span style="padding-left:20px;">Allergies</span>
                </a>
              </li>
              <li [class.selected]="CurrentTabPage == 'immunizations'">
                <a data-toggle="tab" (click)="showResourceDataByType('immunizations',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-vaccine_on.svg" class="active" />
                <img src="./assets/icon/icon-vaccine_off.svg" class="inactive" />
                <span style="padding-left:20px;">Immunizations</span>
                </a>
              </li>
              <li [class.selected]="CurrentTabPage == 'procedures'">
                <a data-toggle="tab" (click)="showResourceDataByType('procedures',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-procedure_on.svg" class="active" />
                <img src="./assets/icon/icon-procedure_off.svg" class="inactive" />
                <span style="padding-left:20px;">Procedures</span>
                </a>
              </li>
              <li [class.selected]="CurrentTabPage == 'medicationadherence'">
                <a data-toggle="tab" (click)="showMedicalAdherence('medicationadherence',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-report_on.svg" class="active" />
                <img src="./assets/icon/icon-report_off.svg" class="inactive" />
                 <span style="padding-left:20px;">Medication Adherence</span>
                </a>
              </li>              
              <li [class.selected]="CurrentTabPage == 'observations'">
                <a data-toggle="tab" (click)="showResourceDataByType('observations',patientId)" href="javascript:void(0);"> 
                <img src="./assets/icon/icon-vital_on.svg" class="active" />
                <img src="./assets/icon/icon-vital_off.svg" class="inactive" />
                <span style="padding-left:20px;">Vitals</span>
                </a>
              </li>
            </ul>
            
            <div class="tab-content">
   
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='message' && loading ">
     
    <div class="card center-screen-main">
      <div class="top-card-body" *ngIf=" !MessageBox0  ">
        <div class="inbox-item" style="padding: 1rem;border-bottom: 1px solid #dfd8d8;height: 60px;" *ngFor="let inbox of inboxDataSingle">
          <div class="inbox-item-img" style="width: 40px;height: 40px;float: left;"><img src="{{inbox.image}}" class="rounded-circle" alt="" style="width: 32px;height: 32px;"></div>
          <div class="inbox-item-author" style="width: 300px;height: 40px;float: left;padding-top: 5px;font-weight: bold;">{{ inbox.name }}</div>

          <div class="inbox-item-btn" style="width: 40px;height: 40px;float: right;padding-top: 5px;font-weight: bold;">
            <a href="javascript:void(0);" (click)="showMessages()">
              <img src="./assets/icon/round-dot-btn.svg" />
            </a>              
          </div>
        </div>
      </div>
      
      <div class="message-card-body" #scrollMe [scrollTop]="scrollMe.scrollHeight" style="min-height: 550px;height: 550px;overflow-x: hidden;overflow-y: scroll;">

        
        <div id="message-box-0" class="card-body" *ngIf=" MessageBox0 " >

          <div class="center-screen-mid" >
            <div>
              <!--<i class="fas fa-comments" style="font-size: 48px;"></i>-->
              <img src="./assets/icon/icon-comments-solid.svg" style="width: 60px;opacity: 0.4;" />
            </div>
            <p>
              Click on one of the recent conversatios to see active chat messages
            </p>
          </div>

        </div> 

        <div id="message-box-1" class="card-body" *ngIf=" ChatMessageDatalength == 0 "  style="min-height: 500px;">

          <div class="center-screen-no-msg" >
            <p>
              This is the beginning of chat with Patient<br/> 
            </p>
          </div>

          <div class="center-screen-help-msg" >
            <p>
              To start a conversation, please type a message in the text box below
            </p>

          </div>

        </div>

        <div id="message-box-1" class="card-body" *ngIf=" ChatMessageDatalength > 0 ">
         <!--{{ChatMessageData | json }}-->

         
         <div class="message-date" *ngIf="showTodayMessage">
                   
          <div class="message-today-date-2">
            <div class="message-date-box"> 
              <p>TODAY</p>
            </div>                        
            <hr class="message-date-solid-line">       

          </div>    
        </div>

          <div *ngFor="let ChatMessage of ChatMessageData" >
            <!--{{ChatMessage.sendTime}} - {{ChatMessage.sendTime | date:'yyyy-MM-dd'}} - {{ChatMessageToday}}-->
            <div class="message-date" *ngIf="shouldDisplayDate(ChatMessage.sendTime | date:'yyyy-MM-dd')">
              <div class="message-date-2"  *ngIf="(ChatMessage.sendTime | date:'yyyy-MM-dd') != (ChatMessageToday)">
                <div class="message-date-box"> 
                  <p>{{ChatMessage.sendTime | date:'d MMMM y'}}</p>
                </div>                              
              </div>        
              <div class="message-today-date-2"  *ngIf="(ChatMessage.sendTime | date:'yyyy-MM-dd') == (ChatMessageToday)">
                <div class="message-date-box"> 
                  <p>TODAY</p>
                </div>                        
                <hr class="message-date-solid-line">       

              </div>    
            </div>


            <div class="message-received" *ngIf=" ChatMessage.senderRole != 'Case-Manager' ">
              <p>{{ChatMessage.text}} </p>
            </div>
            <div class="message-received" *ngIf=" ChatMessage.senderRole != 'Case-Manager' ">
              <span>{{ChatMessage.sendTime | date:'shortTime'}}</span>
            </div>

            <div class="message-sent" *ngIf=" ChatMessage.senderRole == 'Case-Manager' ">
              <p>{{ChatMessage.text}} </p>
            </div>
            <div class="message-sent" *ngIf=" ChatMessage.senderRole == 'Case-Manager' ">
              <span>{{ChatMessage.sendTime | date:'shortTime'}}</span>
            </div>
            
          </div>
          <div #divMessages></div> 
          <!--
          <div class="message-date">
            <div class="message-date-1">
              <div class="message-date-box">
                <p>28 NOV 2020</p>
              </div>              
            </div>
          </div>
          <div class="message-received">
            <p>Hey</p>
          </div>
          <div class="message-sent">
            <p>Hello Mrs Darlene Robertson, this is Grace from Uni-Health</p>
          </div>
          <div class="message-received">
            <p>Okay</p>
          </div>
          <div class="message-sent">
            <p>Thanks</p>
          </div>
          <div class="message-received">
            <p>Okay</p>
          </div>
          <div class="message-date">
            <div class="message-date-2">
              <div class="message-date-box">
                <p>TODAY</p>
              </div>                        
              <hr class="message-date-solid-line">       
            </div>              
          </div>
          <div class="message-received">
            <p>Hey</p>
          </div>
          <div class="message-sent">
            <p>Hello, Mrs Darlene Robertson. This is just a gentle reminder on your upcoming visit to PCP </p>
          </div>
          <div class="message-sent">
            <p>Thank You</p>
          </div>
          <div class="message-received">
            <p>Yes! That is correct</p>
          </div>
        -->
        </div>
      </div>

      <div class="bottom-card-body" *ngIf=" !MessageBox0 ">
        <!--<form id="msgform" name="msgform" class="form-horizontal" [formGroup]="messageform" (ngSubmit)="saveMessageForm($event)">
          <textarea class="input-msg" id="msginput" name="msginput" formControlName="msginput" placeholder="Type your message..." [(ngModel)]="typeValue" autocomplete="off" ></textarea>
          <button type="submit" name="submit" style="float: left;margin: 10px 0px 0px 0px;display:noneX;" ><img style="width:40px;" src="./assets/icon/message-send-btn.png" /></button>
          </form>-->
        
        <form id="msgform" name="msgform" class="form-horizontal" [formGroup]="messageform" (ngSubmit)="saveMessageForm($event)">
          <input type="text" class="input-msg" id="msginput" name="msginput" formControlName="msginput" placeholder="Type your message..." [(ngModel)]="typeValue" autocomplete="off" />
          <button type="submit" name="submit" style="float: left;margin: 10px 0px 0px 0px;display:none;" ><img style="width:40px;" src="./assets/icon/message-send-btn.png" /></button>
          </form>
        <!--
        <form id="msgform" name="msgform" class="form-horizontal" [formGroup]="messageform" (ngSubmit)="saveMessageForm($event)">
        <input type="text" class="input-msg" id="msginput" name="msginput" formControlName="msginput" placeholder="Type your message..." [(ngModel)]="typeValue" style="width: 90%;float:left;" />
        <button type="submit" name="submit" style="float: left;margin: 10px 0px 0px 0px;" ><img style="width:40px;" src="./assets/icon/message-send-btn.png" /></button>
        </form>
        -->
      </div>

    </div>
  </div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='encounters'">
    
    <div class="datatableMenu" style="height: 50px;">
      <div id="breadcum" style="width: 70%;float: left;">
           <!--
            <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
                <img src="./assets/icon/home-breadcum-icon.svg" />
            </a></span>
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>  
            <span style="text-transform: capitalize;font-weight: bold;"> 360 View </span> 
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
            -->  
          <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Visits </span>  
      </div>
      <div id="filterarea" style="width: 30%;float: left;display: none !important;">
       
          <form (ngSubmit)="onSubmit()" #yourForm="ngForm">
              <!--
              <div class="row form-group" style="margin:0px;">
                  <div class="col-sm" style="width:80px;float: left;">
                      <label  for="StartDate">Date</label>
                  </div>
                  <div class="col-sm" style="width: 260px; float: left; border-bottom: 2px solid #70BBEB;">
                      <input type="text"  id='datepicker' ngbDatepicker #fd="ngbDatepicker" placeholder='start date' value='' style="width: 100px;float: left;background: #EBF6FC;border: none;" />    
                      <button (click)="fd.toggle()" style="width: 30px;float: left;background: #EBF6FC;"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                       
                      <input type='text' id='datepicker' ngbDatepicker #td="ngbDatepicker" placeholder='end date' value='' style="width: 100px;float: left;background: #EBF6FC;border: none;" />
                      <button (click)="td.toggle()" style="width: 30px;float: left;background: #EBF6FC;"><i class="fa fa-calendar" aria-hidden="true"></i></button>
  
                  </div>
              </div>
              -->
              <!--
              <div class="row form-group">
                  <div class="col-sm mt-4">                  
                      <input type="submit" value="Submit" class="btn btn-danger">
                  </div>
              </div>
              -->
          </form>
            
  
  
      </div>
    </div>

    <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">
      
      <form class="form-inline" style="float: right;padding: 5px;">
        <label style="color: #333;">Date :</label>
        <div class="form-group hidden">
          <div class="input-group">
            <input name="datepicker"
                   class="form-control"
                   ngbDatepicker
                   #datepicker="ngbDatepicker"
                   [autoClose]="'outside'"
                   (dateSelect)="onDateSelection($event,datepicker)"
                   [displayMonths]="2"
                   [dayTemplate]="t"
                   outsideDays="hidden"
                   [startDate]="fromDate!"
                   tabindex="-1">
            <ng-template #t let-date let-focused="focused">
              <span class="custom-day"
                    [class.focused]="focused"
                    [class.range]="isRange(date)"
                    [class.faded]="isHovered(date) || isInside(date)"
                    (mouseenter)="hoveredDate = date"
                    (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
          </div>
        </div>
        
         
        <div class="form-group">
          <div class="input-group">
            <input #dpFromDate readonly (click)="datepicker.toggle()"
                   class="form-control" placeholder="yyyy-mm-dd"
                   name="dpFromDate"
                   [value]="formatter.format(fromDate)"
                   (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
          </div>
        </div>
        <div class="form-group ml-2">
          <div class="input-group">
            <input #dpToDate readonly (click)="datepicker.toggle()"
                   class="form-control" placeholder="yyyy-mm-dd"
                   name="dpToDate"
                   [value]="formatter.format(toDate)"
                   (input)="toDate = validateInput(toDate, dpToDate.value)">
          </div>
        </div>
        <div class="form-group ml-2">
          <div class="input-group">
      
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
                <img src="./assets/icon/icon-calendar-picker.svg" />
              </button>
            </div>
            <div class="input-group-append">
              <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
                <img src="./assets/icon/clear.png" />
              </button>
            </div>
          </div>
        </div>
      </form>

    </div>
 
      <table [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table"  datatable dt-instance="dtInstance" [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
          <thead>
          <tr>
              <!--<th>#</th>-->
              <th style="width:600px;">Summary <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
              <th style="width:200px;">Visit Type <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
              <th style="width:200px;">Encounter Date/Period <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>                    
              <th style="width:200px;">Entity Name <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
          </tr>
          </thead>
  
          <tbody>
              <tr *ngFor="let resourceItemData of data let i = index;" class="accordion-toggle">
              
                  <!--<td><b>{{i+1}}</b></td> -->
                  <td id="encounters-box">
 

                     <!--{{i}}--><!-- (click)="showDiv($event,'#visitexpnd' + i)" [ngClass]="{'showclass':  !addclass, 'hideclass'}"  -->
                      <div class="text-body" [ngClass]=" addclass " data-toggle="collapse" [attr.data-target]="'#visitexpnd' + i" style="cursor: pointer;" (click)="clickeventvisit($event,'#visitexpnd' + i,i)" >
                          <img src="./assets/icon/visit-expend-icon.svg" *ngIf=" selectedvisitIndex != i " id="closed" />
                          <img src="./assets/icon/visit-unexpend-icon.svg" *ngIf=" selectedvisitIndex === i " id="opened" />
                          <span class="ml-2x" style="color: #2687C6;padding-left: 15px;padding-right: 15px;	white-space: normal;display: inline-flex;line-height: 18px;" *ngIf="resourceItemData.reason!=''">{{resourceItemData.reason}}</span>
                          <span class="ml-2x" style="color: #a7a8a8;padding-left: 15px;padding-right: 15px;	white-space: normal;display: inline-flex;line-height: 18px; font-style: italic;" *ngIf="resourceItemData.reason==''">No diagnosis available for this visit</span>
                          <!--<span class="ml-2x" style="color: #2687C6;padding-left: 15px;" *ngIf="resourceItemData.reason==''">{{resourceItemData.category}} on {{resourceItemData.resourceDate | date}}</span>-->
                      </div>

                      <div id="visitexpnd{{i}}" *ngIf=" selectedvisitIndex === i " class="collapse show" style="padding-top: 10px;border-top: 1px solid #ccc;margin-top: 10px;">
                       
                      <!--   
                          <div class=" vinfoboxlink" *ngIf="resourceItemData.category=='Outpatient' || resourceItemData.category=='Admission' || resourceItemData.category=='Office Visit' ">
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Medication') > -1" (click)="showVisitDetailModal('medicationstatement', resourceItemData.resourceId)"> Medications </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Laboratory') > -1" (click)="showVisitDetailModal('laboratory', resourceItemData.resourceId)"> Lab Report </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Procedure') > -1" (click)="showVisitDetailModal('procedures', resourceItemData.resourceId)"> Procedure </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Vital Signs') > -1" (click)="showVisitDetailModal('vitals', resourceItemData.resourceId)"> Vitals </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Condition') > -1" (click)="showVisitDetailModal('conditions', resourceItemData.resourceId)"> Conditions </span>
                          </div>
                          
                          <div class=" vinfoboxlink" *ngIf="resourceItemData.category=='Inpatient' || resourceItemData.category=='Appointment' ">
                              <span *ngIf="resourceItemData.associatedResources.indexOf('DocumentReference') > -1" (click)="showVisitDetailModal('dischargesummary', resourceItemData.resourceId)"> Discharge Summary </span>
                          </div>
  
                          <div class=" vinfoboxlink" *ngIf="resourceItemData.category=='Support OP Encounter' ">
                              <span style="color: #ccc;border: none;" >No visit data available</span>
                          </div>
                      -->
                          
                          <div class=" vinfoboxlink" *ngIf=" resourceItemData.associatedResources.length > 0 ">
                           
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Diagnosis') > -1" (click)="visitModalPopUp(visitmodalcontent,'diagnosis', resourceItemData.resourceId)"> Diagnosis</span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Diagnosis') == -1" (click)="visitModalPopUp(visitmodalcontent,'diagnosis', resourceItemData.resourceId)"> Diagnosis</span>

                              <span *ngIf="resourceItemData.associatedResources.indexOf('Laboratory') > -1" (click)="visitModalPopUp(visitmodalcontent,'laboratory', resourceItemData.resourceId)"> Lab Report </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Laboratory') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Lab Report </span>

                              <span *ngIf="resourceItemData.associatedResources.indexOf('Procedure') > -1" (click)="visitModalPopUp(visitmodalcontent,'procedures', resourceItemData.resourceId)"> Procedure </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Procedure') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Procedure </span>

                              <span *ngIf="resourceItemData.associatedResources.indexOf('Medication') > -1" (click)="visitModalPopUp(visitmodalcontent,'medicationstatement', resourceItemData.resourceId)"> Medications </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Medication') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Medications </span>
                              
                              <span *ngIf="resourceItemData.category=='Inpatient'" style="border: none;padding: 0px;">  
                               <span *ngIf="resourceItemData.associatedResources.indexOf('DocumentReference') > -1" (click)="visitModalPopUp(visitmodalcontent,'dischargesummary', resourceItemData.resourceId)"> Discharge Summary </span>
                               <span *ngIf="resourceItemData.associatedResources.indexOf('DocumentReference') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Discharge Summary </span>
                              </span>
                              <span *ngIf="resourceItemData.category!='Inpatient'" style="border: none;padding: 0px;">  
                                <span *ngIf="resourceItemData.associatedResources.indexOf('Notes') > -1" (click)="visitModalPopUp(visitmodalcontent,'dischargesummary', resourceItemData.resourceId)"> Notes </span>
                                <span *ngIf="resourceItemData.associatedResources.indexOf('Notes') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Notes </span>
                              </span>
  
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Vital Signs') > -1" (click)="visitModalPopUp(visitmodalcontent,'vitals', resourceItemData.resourceId)"> Vitals </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Vital Signs') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Vitals </span>

                              <!--<span *ngIf="resourceItemData.associatedResources.indexOf('Condition') > -1" (click)="visitModalPopUp(visitmodalcontent,'conditions', resourceItemData.resourceId)"> Conditions </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Condition') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Conditions </span>-->
                              
                              <!--<span *ngIf="resourceItemData.associatedResources.indexOf('Immunization') > -1" (click)="visitModalPopUp(visitmodalcontent,'immunizations', resourceItemData.resourceId)"> Immunizations </span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('Immunization') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Immunizations </span>-->


                              <!--<span *ngIf="resourceItemData.associatedResources.indexOf('DiagnosticReport') > -1" (click)="visitModalPopUp(visitmodalcontent,'diagnostic', resourceItemData.resourceId)"> Diagnostic</span>
                              <span *ngIf="resourceItemData.associatedResources.indexOf('DiagnosticReport') == -1" (click)="visitModalPopUp(visitmodalcontent,'diagnostic', resourceItemData.resourceId)"> Diagnostic</span>-->

                          </div>
  
  
                          <div class=" vinfoboxlink" *ngIf=" resourceItemData.associatedResources.length == 0 ">
                              <!--<span style="color: #ccc;border: none;" >No visit data available</span>-->

                              <span (click)="visitModalPopUp(visitmodalcontent,'diagnosis', resourceItemData.resourceId)"> Diagnosis</span>

                              <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Lab Report </span>

                              <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Procedure </span>

                              <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Medications </span>
                              
  
                              <span *ngIf="resourceItemData.category=='Inpatient'" style="border: none;padding: 0px;">  
                                <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Discharge Summary </span>
                              </span>
                               <span *ngIf="resourceItemData.category!='Inpatient'" style="border: none;padding: 0px;">  
                                <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Notes </span>
                              </span>

                              <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Vitals </span>

                          </div>
                      </div>
  
                     
                      <!--
                         {{resourceItemData.associatedResources.length}}
                         {{resourceItemData.associatedResources}}  
                      -->
   
                  </td>
  
                  <td>
                      <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.category}}</span>
                      <!--
                          <span class="ml-2x">{{resourceItemData.category}}</span>
                          <span class="ml-2x" *ngIf=" resourceItemData.category == 'Outpatient' || resourceItemData.category == 'Appointment' || resourceItemData.category == 'Admission' || resourceItemData.category == 'Support OP Encounter' "> Outpatient </span>
                      -->
                      <!--
                          <span class="ml-2x" *ngIf=" resourceItemData.category != 'Inpatient' "> Outpatient </span>
                          <span class="ml-2x" *ngIf=" resourceItemData.category == 'Inpatient' "> Inpatient </span>
                      -->
                      </div>
                  </td>
                  
                  <td>
                      <div class="text-body" >
                          <span class="ml-2x">{{resourceItemData.resourceDate | date}}</span>
                      </div>
                  </td>
  
                  <td>
                      <div class="text-body" >
                          <span class="ml-2x">{{resourceItemData.entityName}}</span>
                      </div>
                  </td>    
              </tr>     
               
          </tbody>
      </table> 
          
        
      </div>
          
            
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='medications' ">
    
            
      <div *ngIf=" !MedicationBox " >
        
        <div class="datatableMenu" style="height: 50px;">
        
        
        
          <div id="breadcum" style="width: 30%;float: left;">
              <!--
              <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
                  <img src="./assets/icon/home-breadcum-icon.svg" />
              </a></span>
              <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>  
              <span style="text-transform: capitalize;font-weight: bold;"> 360 View </span> 
              <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
              -->  
              <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Medications </span>  
              &nbsp;
          </div>
          <div id="filterarea" style="width: 30%;float: left;    padding: 4px 0px 0px 0px;">
            <form class="form-horizontal" [formGroup]="allmedicationfilterform">
              <h4 class="header-title box-title-switch">Show Active Medication Only
                <label class="switch" style="float: none;margin: -8px 0px -8px 7px;">
                  <input type="checkbox" class="form-control" id="allmedicationset" name="allmedicationset" placeholder="Choose Medication" formControlName="allmedicationset" value="1" [(ngModel)]="AllMedication" (change)="AllMedicationForm($event)">
                  <span class="slider round"></span>
                </label>
              </h4>
              </form>
            <!--
            <div class="custom-control custom-switch" style="float: left;">
                  <form (ngSubmit)="onSubmit()" #yourForm="ngForm">
                      <label class="custom-control-label" for="customSwitches" style="display: block;width: 170px;float: left;">Show Active Medication</label>
                      <label class="switch" >
                          <input type="checkbox" checked (change)="MedicationSwitch($event)" />
                          <span class="slider round"></span>
                      </label>
                  </form>
              </div>     
              -->     
              <!--          
              <div class="custom-control custom-date">
                  <form (ngSubmit)="onSubmit()" #yourForm="ngForm" style="display: none !important;">
                      <div class="row form-group" style="margin:0px;">
                          <div class="col-sm" style="width:80px;float: left;">
                              <label  for="StartDate">Date</label>
                          </div>
                          <div class="col-sm" style="width: 260px; float: left; border-bottom: 2px solid #70BBEB;">
                              <input type="text"  id='datepicker' ngbDatepicker #fd="ngbDatepicker" placeholder='start date' value='' style="width: 100px;float: left;background: #EBF6FC;border: none;" />    
                              <button (click)="fd.toggle()" style="width: 30px;float: left;background: #EBF6FC;"><i class="fa fa-calendar" aria-hidden="true"></i></button>
                               
                              <input type='text' id='datepicker' ngbDatepicker #td="ngbDatepicker" placeholder='end date' value='' style="width: 100px;float: left;background: #EBF6FC;border: none;" />
                              <button (click)="td.toggle()" style="width: 30px;float: left;background: #EBF6FC;"><i class="fa fa-calendar" aria-hidden="true"></i></button>
          
                          </div>
                        </div> 
                  </form>
              </div>
              -->
          </div>
          <div id="alertarea" style="width: 30%;float: left;    padding: 4px 0px 0px 0px;">
            <form class="form-horizontal" [formGroup]="allremindervalidationform">
            <h4 class="header-title box-title-switch">Turn Med Alerts On
              <label class="switch" style="float: none;margin: -8px 0px -8px 7px;">
                <input type="checkbox" class="form-control" id="allreminderset" name="allreminderset" placeholder="Choose Reminder" formControlName="allreminderset" value="1" [(ngModel)]="globalAlertValue" (click)="smallModalPopUpAll(allalertcontent, $event)">
                <span class="slider round"></span>
              </label>

              <!--
                <label class="switch" style="float: none;margin: -8px 0px -8px 7px;">
                <input type="checkbox" class="form-control" id="allreminderset" name="allreminderset" placeholder="Choose Reminder" formControlName="allreminderset" value="1" [(ngModel)]="globalAlert" (change)="AllReminderForm($event)">
                <span class="slider round"></span>
              </label>
              -->

              <!--
                
                        <label class="switch" style="float: left;margin: 10px 0px 0px;">
                          <input [(ngModel)]=" medicationReminderDataisReminderSet "  type="checkbox"  class="form-control" id="reminderset" name="reminderset" placeholder="Choose Reminder" formControlName="reminderset" value="1" (click)="smallModalPopUp(alertcontent,medicationReminderData, $event)">
                          <span class="slider round"></span>
                        </label>
              -->
            </h4>
            </form>
          </div>
      </div>

      
    <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">

      <form class="form-inline" style="float: right;padding: 5px;">
        <label style="color: #333;">Date :</label>
        <div class="form-group hidden">
          <div class="input-group">
            <input name="datepicker"
                   class="form-control"
                   ngbDatepicker
                   #datepicker="ngbDatepicker"
                   [autoClose]="'outside'"
                   (dateSelect)="onDateSelection($event,datepicker)"
                   [displayMonths]="2"
                   [dayTemplate]="t"
                   outsideDays="hidden"
                   [startDate]="fromDate!"
                   tabindex="-1">
            <ng-template #t let-date let-focused="focused">
              <span class="custom-day"
                    [class.focused]="focused"
                    [class.range]="isRange(date)"
                    [class.faded]="isHovered(date) || isInside(date)"
                    (mouseenter)="hoveredDate = date"
                    (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
          </div>
        </div>
        <div class="form-group">
          <div class="input-group">
            <input #dpFromDate readonly (click)="datepicker.toggle()"
                   class="form-control" placeholder="yyyy-mm-dd"
                   name="dpFromDate"
                   [value]="formatter.format(fromDate)"
                   (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
          </div>
        </div>
        <div class="form-group ml-2">
          <div class="input-group">
            <input #dpToDate readonly (click)="datepicker.toggle()"
                   class="form-control" placeholder="yyyy-mm-dd"
                   name="dpToDate"
                   [value]="formatter.format(toDate)"
                   (input)="toDate = validateInput(toDate, dpToDate.value)">
          </div>
        </div>
        <div class="form-group ml-2">
          <div class="input-group">
      
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
                <img src="./assets/icon/icon-calendar-picker.svg" />
              </button>
            </div>
            <div class="input-group-append">
              <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
                <img src="./assets/icon/clear.png" />
              </button>
            </div>
          </div>
        </div>
      </form>

    </div> 

    
<table *ngIf="dtRendered" [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
  <thead>
  <tr>
      <th style="width:50px;background-image:none;"></th>
      <th style="width:400px;">Medication Name <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
      <th style="width:300px;">Strength/Concentration/Units <!--<span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>--></th>
      <th style="width:200px;">Date Prescribed <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>   
      <th style="width:300px;">Frequency <!--<span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>--></th>                 
  </tr>
  </thead>

  <tbody *ngIf="!AllMedication">
      <tr *ngFor="let resourceItemData of data " [ngClass]="(resourceItemData.status=='active')?'activerow':'completedrow'" >
      
          <td>
            <div class="inbox-item-img" *ngIf=" !resourceItemData.isExpired ">
              <div *ngIf=" resourceItemData.isReminderSet " >
                <img src="./assets/icon/med-icon-bell.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;">  
              </div>
              <div *ngIf=" !resourceItemData.isReminderSet && !globalAlert " >
                <img src="./assets/icon/med-icon-active.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;">
              </div>                      
              <div *ngIf=" !resourceItemData.isReminderSet && globalAlert " >
                <img src="./assets/icon/med-icon-warn.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;"  [tooltip]="HtmlMedicationToolTipContent" content-type="template" placement="right" >
              </div> 
            </div>

            <div class="inbox-item-img" *ngIf=" resourceItemData.isExpired || resourceItemData.status!='active' ">
                <img src="./assets/icon/med-icon-inactive.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;">
            </div>
          </td>
          <td>
              <div *ngIf=" !resourceItemData.isExpired && resourceItemData.status=='active' " class="text-body vinfoboxlink" style="line-height: 20px;padding-top: 10px; cursor: pointer;height: auto; ">
                  <span (click)="clickMedication(resourceItemData.resourceId)" class="ml-2X" style="white-space: break-spaces;color:#4299E1;font-weight: 500;font-size: 15px;line-height: 18px;border: none;margin: 0px;padding: 0px;">{{resourceItemData.medication}}</span>
              </div>
              <div *ngIf=" resourceItemData.isExpired || resourceItemData.status!='active' " class="text-body vinfoboxlink" style="line-height: 20px;padding-top: 10px;height: auto; ">
                <span class="ml-2X" style="white-space: break-spaces;color: #9f9e9e;font-weight: 500;font-size: 15px;line-height: 18px;border: none;margin: 0px;padding: 0px;">{{resourceItemData.medication}}</span>
              </div>
              
   
              <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId!=''">
                  <span (click)="visitInfoModalPopUp(visitinfomodalcontent,'visitinfo', resourceItemData.encounterId)"> Visit Info </span>
              </div>
              <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId==''" style="display: none;">
                <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Visit Info </span>
              </div>
              
          </td>
          <td>
              <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                  <span class="ml-2x">{{resourceItemData.dosageQuantity}} {{resourceItemData.dosageUnit}} </span>
              </div>
          </td>
          <td>
            <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                <span class="ml-2x">{{resourceItemData.resourceDate | date }}</span>
            </div>
          </td>
          <td>
              <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                  <span class="ml-2x" style="white-space: break-spaces;">{{resourceItemData.patientInstruction}}</span>
              </div>
          </td> 
          

      </tr>     

  </tbody>

  
  <tbody *ngIf=" AllMedication">
    <ng-container *ngFor="let resourceItemData of data "> 
    <tr *ngIf=" resourceItemData.status=='active' && !resourceItemData.isExpired " [ngClass]="(resourceItemData.status=='active')?'activerow':'completedrow'" >
    
        <td *ngIf=" resourceItemData.status=='active' && !resourceItemData.isExpired " >
          
            <div class="inbox-item-img" *ngIf=" !resourceItemData.isExpired ">
              <div *ngIf=" resourceItemData.isReminderSet " >
                <img src="./assets/icon/med-icon-bell.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;">  
              </div>
              <div *ngIf=" !resourceItemData.isReminderSet && !globalAlert " >
                <img src="./assets/icon/med-icon-active.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;">
              </div>                      
              <div *ngIf=" !resourceItemData.isReminderSet && globalAlert " >
                <img src="./assets/icon/med-icon-warn.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;" [tooltip]="HtmlMedicationToolTipContent" content-type="template" placement="right" >
              </div> 
            </div>

            <div class="inbox-item-img" *ngIf=" resourceItemData.isExpired ">
              <img src="./assets/icon/med-icon-inactive.png" class="rounded-circleX" alt="" style="width: 40px;height: 40px;">
            </div>

        </td>
        <td *ngIf=" resourceItemData.status=='active' && !resourceItemData.isExpired " >
            <div *ngIf=" !resourceItemData.isExpired " class="text-body vinfoboxlink" style="line-height: 20px;padding-top: 10px; cursor: pointer;height: auto; ">
                <span (click)="clickMedication(resourceItemData.resourceId)" class="ml-2X" style="white-space: break-spaces;color:#4299E1;font-weight: 500;font-size: 15px;line-height: 18px;border:none;margin: 0px;padding: 0px;">{{resourceItemData.medication}}</span>
            </div>
            <div *ngIf=" resourceItemData.isExpired " class="text-body vinfoboxlink" style="line-height: 20px;padding-top: 10px; height: auto;">
              <span class="ml-2X" style="white-space: break-spaces;color: #9f9e9e;font-weight: 500;font-size: 15px;line-height: 18px;border:none;margin: 0px;padding: 0px;">{{resourceItemData.medication}}</span>
            </div>
            
            <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId!=''">
              <span (click)="visitInfoModalPopUp(visitinfomodalcontent,'visitinfo', resourceItemData.encounterId)"> Visit Info </span>
            </div>
            <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId==''" style="display: none;">
              <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Visit Info </span>
            </div>
        </td>

        <td *ngIf=" resourceItemData.status=='active' && !resourceItemData.isExpired " >
            <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                <span class="ml-2x">{{resourceItemData.dosageQuantity}} {{resourceItemData.dosageUnit}} </span>
            </div>
        </td>
        
        <td *ngIf=" resourceItemData.status=='active' && !resourceItemData.isExpired " >
            <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                <span class="ml-2x">{{resourceItemData.resourceDate | date }}</span>
            </div>
        </td>
        <td *ngIf=" resourceItemData.status=='active' && !resourceItemData.isExpired " >
          <div class="text-body" style="line-height: 20px;padding-top: 10px;">
              <span class="ml-2x" style="white-space: break-spaces;">{{resourceItemData.patientInstruction}}</span>
          </div>
        </td> 
      
    </tr>   
  </ng-container>    

</tbody>
</table>

      <ng-template #HtmlMedicationToolTipContent style="width: 500px;">
        <div>
          <span style='color: #ED8936;'><img src="./assets/icon/icon-info.svg" alt="" style="width: 15px;height: 15px;"> (Requires manual action)</span> Med Alerts setting could not set reminder for this medication
        </div>
      </ng-template>
     
      </div>
      <div *ngIf=" MedicationBox ">
       
        <div class="card center-screen-main">
          <div class="message-card-body">
  
            <div id="message-box-0" class="card-body" *ngIf=" MessageBox0 " style="padding: 0rem 1rem;">
  
              <div class="center-screen-mid" >
                <div>
                  <img src="./assets/icon/medication-icon.svg" style="width: 100px;padding: 20px;" />
                </div>
                <p>
                  Click on one of the medication to see / set reminder
                </p>
              </div>
  
            </div>
  
            
            <div id="message-box-1" class="card-body" *ngIf=" MessageBox1 " style="padding: 0rem 1rem;">

              <div id="breadcum" style="width: 100%;float: left;height: 50px;border-bottom: 1px solid;margin-bottom: 25px;">
                <span><a href="javascript:void(0);" (click)="showResourceDataByType('medications',patientId)" class="mouse-pointer" style="font-style: normal; font-weight: normal; font-size: 18px; line-height: 25px; text-align: center; color: #222222;">
                    <img src="./assets/sh360icons/Back.png" /> {{medicationReminderData.medicine.description}}
                </a></span>
              </div>
  
              <div class="center-screen-med" >
                <div class="inbox-item" style="border: none;" >
                  <p class="inbox-item-medication">{{medicationReminderData.medicine.description}} <span class="inbox-item-dosage" *ngIf=" medicationReminderData.medicine.dosageQty !='' "> * {{medicationReminderData.medicine.dosageQty}} {{medicationReminderData.medicine.dosageUnit}}</span> </p>
                  
                  
                <!--
                  <p class="inbox-item-medication">{{medicationReminderData.medicine.description}}</p>
                  <p class="inbox-item-dosage" *ngIf=" medicationReminderData.medicine.dosageQty !='' ">{{medicationReminderData.medicine.dosageQty}} {{medicationReminderData.medicine.dosageUnit}}</p>
                  <p class="inbox-item-instruction" *ngIf=" medicationReminderData.medicine.instruction !='' "> ( {{medicationReminderData.medicine.instruction}} ) </p> 
                -->  
                </div> 
                <hr class="med-solid-line">       
              </div>
  
              <div class="form-section" style="width: 75%;margin: 0 auto;">
  
                
                <form class="form-horizontal" (ngSubmit)="saveReminderData(remindervalidationform,medicationReminderData)" [formGroup]="remindervalidationform">
                  <div class="form-group row mb-3">
                      <label for="reminderset" class="col-3 col-form-label">Alert On</label>
                      <div class="col-9">

                        <label class="switch" style="float: left;margin: 10px 0px 0px;">
                          <input [(ngModel)]=" medicationReminderDataisReminderSet "  type="checkbox"  class="form-control" id="reminderset" name="reminderset" placeholder="Choose Reminder" formControlName="reminderset" value="1" (click)="smallModalPopUp(alertcontent,medicationReminderData, $event)">
                          <span class="slider round"></span>
                        </label>

                        <!--<label class="switch" style="float: left;margin: 10px 0px 0px;">
                          <input type="checkbox" class="form-control" id="reminderset" name="reminderset" placeholder="Choose Reminder" formControlName="reminderset" value="1" [(ngModel)]="medicationReminderData.isReminderSet" (change)="showReminderForm(medicationReminderData.id, $event)" >
                          <span class="slider round"></span>
                        </label>-->

                        <!--<label class="switch" style="float: left;margin: 10px 0px 0px;" *ngIf=" medicationReminderData.isReminderSet ">
                          <input checked="checked" type="checkbox"  class="form-control" id="reminderset" name="reminderset" placeholder="Choose Reminder" formControlName="reminderset" value="1" (change)="smallModalPopUp(alertcontent,medicationReminderData, $event)">
                          <span class="slider round"></span>
                        </label>

                        
                        <label class="switch" style="float: left;margin: 10px 0px 0px;" *ngIf=" !medicationReminderData.isReminderSet ">
                          <input type="checkbox"  class="form-control" id="reminderset" name="reminderset" placeholder="Choose Reminder" formControlName="reminderset" value="1" (change)="smallModalPopUp(alertcontent,medicationReminderData, $event)">
                          <span class="slider round"></span>
                        </label>-->
                      </div>
                  </div> 
                  <div *ngIf=" MedicationReminderFormBox1 ">
  
                    
                  <div class="form-group row mb-3">
                    <label for="inputFrequency" class="col-3 col-form-label">Frequency</label>
                    <div class="col-9">                     
                      <!--<ng-select [readonly]="FrequencyEdit" [items]="frequencyList" [(ngModel)]="timesPerDayValue"
                      bindLabel="name" bindValue="id" id="frequencytiming" name="frequencytiming" formControlName="frequencytiming"
                      placeholder="Choose Frequency" (change)="getSelectedTime($event)">
                      </ng-select>-->

                      <ng-select [items]="frequencyList" [(ngModel)]="timesPerDayValue"
                      bindLabel="name" bindValue="id" id="frequencytiming" name="frequencytiming" formControlName="frequencytiming"
                      placeholder="Choose Frequency" (change)="getSelectedTime($event)" [ngClass]="{ 'is-invalid': submitted && form.frequencytiming.errors }" >
                      </ng-select>
                      <div *ngIf="submitted && form.frequencytiming.errors" class="invalid-feedback">
                        <span>Please choose frequency.</span>
                      </div>
  
                      <div class="card-bodyX" formArrayName="settimes">
                        <div class="row col-12 m-0 p-0">
                            <div *ngFor="let contact of duplicateTimeColumns.controls; let i = index;" style="margin: 0px; padding:0px;">
                                <div [formGroupName]="i" class="row" style="margin: 0px; padding:0px;">
                                    <div class="form-group col-12" style="margin: 1rem 1rem 1rem 0rem; padding: 0rem 1rem 0rem 0rem;" *ngIf="this.medicationReminderData.timing.isManualTimesPerDay == true ">
                                        <input formControlName="times" class="form-control" [owlDateTimeTrigger]="dt4" [owlDateTime]="dt4" readonly="true" />
                                        <owl-date-time hour12Timer="true" [pickerType]="'timer'" #dt4></owl-date-time>
                                    </div>
                                    
                                    <div class="form-group col-12" style="margin: 1rem 1rem 1rem 0rem;padding: 0rem 1rem 0rem 0rem;" *ngIf="this.medicationReminderData.timing.isManualTimesPerDay == false ">
                                        <input formControlName="times" class="form-control" [owlDateTimeTrigger]="dt4" [owlDateTime]="dt4" readonly="true" />
                                        <owl-date-time hour12Timer="true" [pickerType]="'timer'" #dt4></owl-date-time>
                                      <!--<input formControlName="times" class="form-control" readonly="true" [disabled]="true" />-->
                                      <!--<input formControlName="times" class="form-control" [owlDateTimeTrigger]="dt4" [owlDateTime]="dt4" readonly="true" [disabled]="true" />
                                      <owl-date-time [pickerType]="'timer'" #dt4></owl-date-time>-->
                                    </div>
                                    <!--
                                    <label class="example-input-wrapper">
                                      Time:
                                      <input placeholder="Time:"
                                             [owlDateTimeTrigger]="dt2" [owlDateTime]="dt2">
                                      <owl-date-time hour12Timer="true" [pickerType]="'timer'" #dt2></owl-date-time>
                                    </label>
                                    -->
                                    
                                </div> 
                            </div>
                        </div>
                      </div>

                      <div *ngIf="settimeserrors" class="invalid-feedback" style="display: block !important;">
                        <span>Duplicate timing in frequency.</span>
                      </div>
    
                    </div>
                  </div>
                  <div class="form-group row mb-3">
                    <label for="inputRemindme" class="col-3 col-form-label">Remind me</label>
                    <div class="col-9">
   
                        <div class="radio radio-info form-check-inlineX" style="padding: 5px 0px 5px 5px;">
                          <input type="radio" id="inlineRadio1" name="reminderrepeat" formControlName="reminderrepeat" value="EVERYDAY" [checked]="reminderrepeatEveryday" [(ngModel)]="reminderrepeatValue" (change)="remindmeChange($event)" />
                          <label for="inlineRadio1"> Everyday </label>
                        </div>
                        <div class="radio radio-info form-check-inlineX" style="padding: 5px 0px 5px 5px;">
                          <input type="radio" id="inlineRadio2" name="reminderrepeat" formControlName="reminderrepeat" value="SPECIFIC" [checked]="reminderrepeatSpecificday" [(ngModel)]="reminderrepeatValue" (change)="remindmeChange($event)">
                          <label for="inlineRadio2"> Specific days of the week </label>
                        </div>
  
                        
                      <div id="RemindDays" *ngIf = " MedicationReminderDayBox ">
                        <div class="weekDays-selector">
                          <input type="checkbox" id="weekday-sun" name="weekdays[]" formArrayName="weekdays" value="SUN" class="weekday" [checked]="SUNCHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-sun">SUN</label>
  
                          <input type="checkbox" id="weekday-mon" name="weekdays[]" formArrayName="weekdays" value="MON" class="weekday" [checked]="MONCHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-mon">MON</label>
  
                          <input type="checkbox" id="weekday-tue" name="weekdays[]" formArrayName="weekdays" value="TUE" class="weekday" [checked]="TUECHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-tue">TUE</label>
  
                          <input type="checkbox" id="weekday-wed" name="weekdays[]" formArrayName="weekdays" value="WED" class="weekday" [checked]="WEDCHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-wed">WED</label>
  
                          <input type="checkbox" id="weekday-thu" name="weekdays[]" formArrayName="weekdays" value="THU" class="weekday" [checked]="THUCHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-thu">THU</label>
  
                          <input type="checkbox" id="weekday-fri" name="weekdays[]" formArrayName="weekdays" value="FRI" class="weekday" [checked]="FRICHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-fri">FRI</label>
  
                          <input type="checkbox" id="weekday-sat" name="weekdays[]" formArrayName="weekdays" value="SAT" class="weekday" [checked]="SATCHECK" (change)="onCheckboxChange($event)" />
                          <label for="weekday-sat">SAT</label>
                        </div>

                        <div *ngIf="setdayserrors" class="invalid-feedback" style="display: block !important;">
                          <span>Please select at least one day</span>
                        </div>

                        <div *ngIf="setdayscounterrors" class="invalid-feedback" style="display: block !important;">
                          <span>Either duration or specific days is incorrect</span>
                        </div>
   
                      </div>  
                    
                    </div>
                  </div>
                  <div class="form-group row mb-3">
                    <label for="inputDuration" class="col-3 col-form-label">Duration</label>
                    
                      <div class="col-9">
                      <ng-select [items]="durationList" [(ngModel)]="durationdayvalue"
                        bindLabel="name" bindValue="id" id="durationday" name="durationday" formControlName="durationday"
                        placeholder="Select duration" (change)="durationdayChange($event)" >
                      </ng-select>  

                      <!--<ng-select [readonly]="DurationEdit" [items]="durationList" [(ngModel)]="durationdayvalue"
                        bindLabel="name" bindValue="id" id="durationday" name="durationday" formControlName="durationday"
                        placeholder="Select duration" (change)="durationdayChange($event)" >
                      </ng-select>  -->
                     
                  <div id="DurationTimes" *ngIf=" medicationReminderData.duration.totalDays == 10000 ">
                    <input type="hidden" class="form-control" style="width: 60px;margin:10px;" id="totaldays" name="totaldays" formControlName="totaldays" [(ngModel)]="medicationReminderData.duration.totalDays" [readonly]="true" />
                  </div>

                    <div id="DurationTimes" style="padding-top: 25px;" *ngIf=" medicationReminderData.duration.totalDays != 10000 ">
                    
                      <div class="dayslidecontainer" style="padding: 8px 8px 8px 0px;width: 80%;float:left;">
                        <ng5-slider [(value)]="minValue" [options]="options" (valueChange)="durationsliderdayChange($event)"></ng5-slider>
                      </div>
                      <div class="dayslidecountbox" style="width: 20%; float:left;">
                        <input type="text" class="form-control" style="width: 60px;margin:10px;" id="totaldays" name="totaldays" formControlName="totaldays" [(ngModel)]="medicationReminderData.duration.totalDays" [readonly]="true" />
                      </div>
  
                    </div>

                    </div>
                    
                  </div>
  
                <!--  
                  <div class="form-group row mb-3">
                    <label for="inputDuration" class="col-3 col-form-label">Duration</label>
                    <div class="col-lg-12 bdr-top" >
                      <div class="form-group">
                          <label class="form-label">Sliders<span class="text-danger">*</span> </label>
                          <ng-select [items]="sliderList"
                          formControlName="slider"
                           bindLabel="label"
                           bindValue="id"
                           [multiple]="false"
                            (change)="getSelectedSlider( $event )"
                              
                             placeholder="Choose Connection">
                          </ng-select>
                          
                      </div>
                  </div>
      
                  <ng5-slider [(value)]="minValue"  [options]="options"></ng5-slider>
  
                  </div>
                -->
                  <!--
                  <div class="form-group row mb-3">
                    <hr class="med-solid-line">        
                    <label for="refill" class="col-6 col-form-label">Remind patient for medication refill</label>
                    <div class="col-6">
                      <label class="switch" style="float: left;margin: 10px 0px 0px;">
                        <input type="checkbox" class="form-control" id="refill" name="refill" placeholder="Choose Refill" formControlName="refill" value="1"  />
                        <span class="slider round"></span>
                      </label>
                    </div>
                    <hr class="med-solid-line">       
                  </div> 
                  -->
                  <div class="form-group row mb-3 justify-content-end">
                    <div class="col-9">
                        
                    </div>
                  </div>
                
                  <div class="form-group mb-0 justify-content-end row">
                    <div class="col-93">
                    </div>  
                    <div class="col-9">
                      <!--<button type="reset" class="btn btn-secondary" style="margin-right: 15px;">RESET TO DEFAULT</button>-->
  
                      <!--<button type="button"  (click)="openModal(deleterulecontent)"  class="btn btn-info">SAVE X</button>-->
                      
                      <button type="button" (click)="clickMedication(medicationReminderData.resourceId)" class="btn btn-secondary" style="margin-right: 15px;">RESET TO SYSTEM DEFAULT</button>
  
                      <button type="submit" id="submit" name="submit" class="btn btn-info">SAVE</button>
                    </div>
                  </div>
  
                  </div> 
              </form>
  
  
  
              </div>
              
              <div class="center-screen-med" *ngIf=" !MedicationReminderFormBox1 && FrequencyEdit " >
                <div class="med-alert-msg">
                  <p>
                    This medication has existing alert preferences which could be pre-populated on your behalf. Turn on the switch above to see more information.
                  </p>
                </div>
              </div>

              <div class="center-screen-med" *ngIf=" !MedicationReminderFormBox1 && !FrequencyEdit " >
                <div class="med-alert-msg">
                  <p style="color: #222222;">
                    <span style="color:#F2994A;">(Requires manual action)</span>  Med Alerts setting could not set reminder for this medication
                  </p>
                </div>
              </div>
  
            </div>
  
  
  
          </div>  
         
        </div>
      </div>
       

    </div>
  
            
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='allergies'">
       
      <div class="datatableMenu" style="height: 50px;"> 
          <div id="breadcum" style="width: 60%;float: left;">
              <!--
              <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
                  <img src="./assets/icon/home-breadcum-icon.svg" />
              </a></span>
              <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>  
              <span style="text-transform: capitalize;font-weight: bold;"> 360 View </span> 
              <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
              -->  
              <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Allergies </span>  
          </div>
          <div id="filterarea" style="width: 40%;float: left;">
          
          </div>

      </div>

      <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">

        <form class="form-inline" style="float: right;padding: 5px;">
          <label style="color: #333;">Date :</label>
          <div class="form-group hidden">
            <div class="input-group">
              <input name="datepicker"
                     class="form-control"
                     ngbDatepicker
                     #datepicker="ngbDatepicker"
                     [autoClose]="'outside'"
                     (dateSelect)="onDateSelection($event,datepicker)"
                     [displayMonths]="2"
                     [dayTemplate]="t"
                     outsideDays="hidden"
                     [startDate]="fromDate!"
                     tabindex="-1">
              <ng-template #t let-date let-focused="focused">
                <span class="custom-day"
                      [class.focused]="focused"
                      [class.range]="isRange(date)"
                      [class.faded]="isHovered(date) || isInside(date)"
                      (mouseenter)="hoveredDate = date"
                      (mouseleave)="hoveredDate = null">
                  {{ date.day }}
                </span>
              </ng-template>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group">
              <input #dpFromDate readonly (click)="datepicker.toggle()"
                     class="form-control" placeholder="yyyy-mm-dd"
                     name="dpFromDate"
                     [value]="formatter.format(fromDate)"
                     (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
            </div>
          </div>
          <div class="form-group ml-2">
            <div class="input-group">
              <input #dpToDate readonly (click)="datepicker.toggle()"
                     class="form-control" placeholder="yyyy-mm-dd"
                     name="dpToDate"
                     [value]="formatter.format(toDate)"
                     (input)="toDate = validateInput(toDate, dpToDate.value)">
            </div>
          </div>
          <div class="form-group ml-2">
            <div class="input-group">
        
              <div class="input-group-append">
                <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
                  <img src="./assets/icon/icon-calendar-picker.svg" />
                </button>
              </div>
              <div class="input-group-append">
                <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
                  <img src="./assets/icon/clear.png" />
                </button>
              </div>
            </div>
          </div>
        </form>
  
      </div>
  
      <table [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
          <thead>
          <tr>
              <th style="width:50px;background-image:none;"></th>
              <th style="width:600px;">Allergy Name <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
              <th style="width:600px;">Allergy Reaction <!--<span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>--></th>
              <!--<th style="width:200px;">Allergy Date <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>-->                    
              <!--<th>Hospital Name <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>-->
          </tr>
          </thead>
  
          <tbody >
              <tr *ngFor="let resourceItemData of data let i = index;">
              
                  <td>
                      <!--<b>{{i+1}}</b>-->
                      <img src="./assets/icon/allergy-page-icon.svg" style="width: 30px;padding-left: 10px;" />
                  </td>
                  <td>
                      <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                          <span class="ml-2x" style="white-space: break-spaces;">{{resourceItemData.allergyName}}</span>
                      </div>
                      
                      <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId!=''">
                          <span (click)="visitInfoModalPopUp(visitinfomodalcontent,'visitinfo', resourceItemData.encounterId)"> Visit Info </span>
                      </div>
                      <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId==''" style="display: none;">
                        <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Visit Info </span>
                      </div>
                  </td>
                  <td>
                      <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                          <span class="ml-2x" style="white-space: break-spaces;">{{resourceItemData.reaction}}</span>
                      </div>
                  </td>
                  <!--
                  <td>
                      <div class="text-body" >
                          <span class="ml-2x">{{resourceItemData.resourceDate | date}}</span>
                      </div>
                  </td>
                  -->
                  <!--
                  <td>
                      <div class="text-body" >
                          <span class="ml-2x">{{resourceItemData.entity.name}}</span>
                      </div>
                  </td>
                  -->    
              </tr>     
  
          </tbody>
      </table>

  </div>


  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='immunizations'">
    
    <div class="datatableMenu" style="height: 50px;">
        <div id="breadcum" style="width: 60%;float: left;">
            <!--
            <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
                <img src="./assets/icon/home-breadcum-icon.svg" />
            </a></span>
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>  
            <span style="text-transform: capitalize;font-weight: bold;"> 360 View </span> 
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
            -->  
            <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Immunizations </span>  
        </div>
        <div id="filterarea" style="width: 40%;float: left;">
        
        </div>
    </div>

    <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">

      <form class="form-inline" style="float: right;padding: 5px;">
        <label style="color: #333;">Date :</label>
        <div class="form-group hidden">
          <div class="input-group">
            <input name="datepicker"
                   class="form-control"
                   ngbDatepicker
                   #datepicker="ngbDatepicker"
                   [autoClose]="'outside'"
                   (dateSelect)="onDateSelection($event,datepicker)"
                   [displayMonths]="2"
                   [dayTemplate]="t"
                   outsideDays="hidden"
                   [startDate]="fromDate!"
                   tabindex="-1">
            <ng-template #t let-date let-focused="focused">
              <span class="custom-day"
                    [class.focused]="focused"
                    [class.range]="isRange(date)"
                    [class.faded]="isHovered(date) || isInside(date)"
                    (mouseenter)="hoveredDate = date"
                    (mouseleave)="hoveredDate = null">
                {{ date.day }}
              </span>
            </ng-template>
          </div>
        </div>
        <div class="form-group">
          <div class="input-group">
            <input #dpFromDate readonly (click)="datepicker.toggle()"
                   class="form-control" placeholder="yyyy-mm-dd"
                   name="dpFromDate"
                   [value]="formatter.format(fromDate)"
                   (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
          </div>
        </div>
        <div class="form-group ml-2">
          <div class="input-group">
            <input #dpToDate readonly (click)="datepicker.toggle()"
                   class="form-control" placeholder="yyyy-mm-dd"
                   name="dpToDate"
                   [value]="formatter.format(toDate)"
                   (input)="toDate = validateInput(toDate, dpToDate.value)">
          </div>
        </div>
        <div class="form-group ml-2">
          <div class="input-group">
      
            <div class="input-group-append">
              <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
                <img src="./assets/icon/icon-calendar-picker.svg" />
              </button>
            </div>
            <div class="input-group-append">
              <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
                <img src="./assets/icon/clear.png" />
              </button>
            </div>
          </div>
        </div>
      </form>

    </div>
 
<table [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
        <thead>
        <tr>
            <th style="width:50px;background-image:none;"></th>
            <th style="width:600px;">Name <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
            <th style="width:300px;">Date <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
            <th style="width:300px;">Entity Name <!--<span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>--></th>                    
        </tr>
        </thead>

        <tbody>
            <tr *ngFor="let resourceItemData of data let i = index;">
            
                <td>
                    <!--<b>{{i+1}}</b>-->
                    <img src="./assets/icon/immunization-page-icon.svg" style="width: 30px;padding-left: 10px;" />
                </td>
                <td>
                    <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                        <span class="ml-2x" style="white-space: break-spaces;float:left;">{{resourceItemData.immunizationCode}}</span>
                        <span *ngIf="resourceItemData.isDuplicate == true" class="duplicate-text">Duplicate Entry</span><br/>
                    </div>
                    
                    <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId!=''">
                        <span (click)="visitInfoModalPopUp(visitinfomodalcontent,'visitinfo', resourceItemData.encounterId)"> Visit Info </span>
                    </div>
                    <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId==''" style="display: none;">
                      <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Visit Info </span>
                    </div>
                    
                </td>

                <td>
                    <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                        <span class="ml-2x">{{resourceItemData.resourceDate}}</span>
                    </div>
                </td>

                <td>
                    <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                        <span class="ml-2x">{{resourceItemData.entityName}}</span>
                    </div>
                </td>    
            </tr>     

        </tbody>
    </table>

</div>


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='procedures'">
    
  <div class="datatableMenu" style="height: 50px;">
      <div id="breadcum" style="width: 60%;float: left;">
          <!--
            <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
                <img src="./assets/icon/home-breadcum-icon.svg" />
            </a></span>
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>  
            <span style="text-transform: capitalize;font-weight: bold;"> 360 View </span> 
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
            -->  
          <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Procedures </span>  
      </div>
      <div id="filterarea" style="width: 40%;float: left;">
      
      </div>
  </div>

  <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">

    <form class="form-inline" style="float: right;padding: 5px;">
      <label style="color: #333;">Date :</label>
      <div class="form-group hidden">
        <div class="input-group">
          <input name="datepicker"
                 class="form-control"
                 ngbDatepicker
                 #datepicker="ngbDatepicker"
                 [autoClose]="'outside'"
                 (dateSelect)="onDateSelection($event,datepicker)"
                 [displayMonths]="2"
                 [dayTemplate]="t"
                 outsideDays="hidden"
                 [startDate]="fromDate!"
                 tabindex="-1">
          <ng-template #t let-date let-focused="focused">
            <span class="custom-day"
                  [class.focused]="focused"
                  [class.range]="isRange(date)"
                  [class.faded]="isHovered(date) || isInside(date)"
                  (mouseenter)="hoveredDate = date"
                  (mouseleave)="hoveredDate = null">
              {{ date.day }}
            </span>
          </ng-template>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <input #dpFromDate readonly (click)="datepicker.toggle()"
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpFromDate"
                 [value]="formatter.format(fromDate)"
                 (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
          <input #dpToDate readonly (click)="datepicker.toggle()"
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpToDate"
                 [value]="formatter.format(toDate)"
                 (input)="toDate = validateInput(toDate, dpToDate.value)">
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
    
          <div class="input-group-append">
            <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
              <img src="./assets/icon/icon-calendar-picker.svg" />
            </button>
          </div>
          <div class="input-group-append">
            <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
              <img src="./assets/icon/clear.png" />
            </button>
          </div>
        </div>
      </div>
    </form>

  </div>
 
  <table [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
      <thead>
      <tr>
          <th style="width:50px;background-image:none;"></th>
          <th style="width:600px;">Procedure Name <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
          <th style="width:300px;">Procedure Date <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
          <th style="width:300px;">Entity Name <!--<span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>--></th>                    
      </tr>
      </thead>

      <tbody>
          <tr *ngFor="let resourceItemData of data let i = index;">
          
              <td>
                  <!--<b>{{i+1}}</b>-->
                  <img src="./assets/icon/procedure-page-icon.svg" style="width: 30px;padding-left: 10px;" />
              </td>
              <td>
                  <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                      <span class="ml-2x" style="white-space: break-spaces;">{{resourceItemData.procedureName}}</span>
                  </div>

                  <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId!=''">
                      <span (click)="visitInfoModalPopUp(visitinfomodalcontent,'visitinfo', resourceItemData.encounterId)"> Visit Info </span>
                  </div>
                  <div class=" vinfoboxlink" *ngIf="resourceItemData.encounterId==''" style="display: none;">
                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Visit Info </span>
                </div>
              </td>

              <td>
                  <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                      <span class="ml-2x">{{resourceItemData.resourceDate | date}}</span>
                  </div>
              </td>

              <td>
                  <div class="text-body" style="line-height: 20px;padding-top: 10px;">
                      <span class="ml-2x">{{resourceItemData.entityName}}</span>
                  </div>
              </td>    
          </tr>     

      </tbody>
  </table>

</div>
  

<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='observations'">
    
  <div class="datatableMenu" style="height: 50px;">
      <div id="breadcum" style="width: 70%;float: left;">
          <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Vitals </span>  
      </div> 
      <div id="filterarea" style="width: 40%;float: left;">
      
      </div>
  </div>

  
  <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">

    <form class="form-inline" style="float: right;padding: 5px;">
      <label style="color: #333;">Date :</label>
      <div class="form-group hidden">
        <div class="input-group">
          <input name="datepicker"
                 class="form-control"
                 ngbDatepicker
                 #datepicker="ngbDatepicker"
                 [autoClose]="'outside'"
                 (dateSelect)="onDateSelection($event,datepicker)"
                 [displayMonths]="2"
                 [dayTemplate]="t"
                 outsideDays="hidden"
                 [startDate]="fromDate!"
                 tabindex="-1">
          <ng-template #t let-date let-focused="focused">
            <span class="custom-day"
                  [class.focused]="focused"
                  [class.range]="isRange(date)"
                  [class.faded]="isHovered(date) || isInside(date)"
                  (mouseenter)="hoveredDate = date"
                  (mouseleave)="hoveredDate = null">
              {{ date.day }}
            </span>
          </ng-template>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <input #dpFromDate readonly (click)="datepicker.toggle()"
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpFromDate"
                 [value]="formatter.format(fromDate)"
                 (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
          <input #dpToDate readonly (click)="datepicker.toggle()"
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpToDate"
                 [value]="formatter.format(toDate)"
                 (input)="toDate = validateInput(toDate, dpToDate.value)">
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
    
          <div class="input-group-append">
            <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
              <img src="./assets/icon/icon-calendar-picker.svg" />
            </button>
          </div>
          <div class="input-group-append">
            <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
              <img src="./assets/icon/clear.png" />
            </button>
          </div>
        </div>
      </div>
    </form>

  </div>
 
  <table [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
       
      <thead>
          <tr>
              <th style="width:50px;background-image:none;"></th>
              <th style="width:400px;">Vital <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
              <th style="width:200px;">Reading <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
              <th style="width:300px;">Date <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
              <th style="width:300px;">Entity Name <!--<span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>--></th>
          </tr>
          </thead>
    
          <tbody>
              <tr *ngFor="let resourceItemDataArray of data let i = index;">
              
                  <td>
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Vital signs'">
                      <img src="./assets/sh360/vital.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div>

                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Height' ||  resourceItemDataArray.observationName == 'Body height'">
                      <img src="./assets/sh360/height-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                      </div>
                          
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Weight' || resourceItemDataArray.observationName == 'Body weight'">
                      <img src="./assets/sh360/weight-vitals.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div>
                      
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Temp' || resourceItemDataArray.observationName == 'Body Temperature' || resourceItemDataArray.observationName == 'Body temperature'">
                      <img src="./assets/sh360/temp-vitals.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div>
                      
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Pulse' || resourceItemDataArray.observationName == 'Heart Rate' ">
                      <img src="./assets/sh360/heart-vital.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div>
                              
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Resp' || resourceItemDataArray.observationName == 'Resp rate' || resourceItemDataArray.observationName == 'Respiratory Rate'">
                      <img src="./assets/sh360/respiratory-vitals.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div> 
                        
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'BP' || resourceItemDataArray.observationName == 'BP sys/dias' || resourceItemDataArray.observationName == 'Blood pressure Systolic and Diastolic' || resourceItemDataArray.observationName == 'Blood pressure systolic and diastolic' ">
                      <img src="./assets/sh360/blood-vitals.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div> 

                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'SpO2' || resourceItemDataArray.observationName == 'Oxygen saturation' || resourceItemDataArray.observationName == 'Oxygen saturation in Capillary blood by Oximetry' ">
                      <img src="./assets/sh360/mh-icon-spo2.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div>

                      
                      <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Body Mass Index (BMI)' ||  resourceItemDataArray.observationName == 'BMI'">
                      <img src="./assets/sh360/bmi-vitals.png" width="34" height="34" class="img-thumbnailX" alt="{{resourceItemDataArray.observationName}}" />
                      </div>
                          
    
                  </td>    
                  <td>
                    <div class="text-body" >
                      <span class="ml-2x">{{resourceItemDataArray.observationName}}</span>
                    </div>

                    
                  <div class=" vinfoboxlink" *ngIf="resourceItemDataArray.encounterId!=''" style="display: none;">
                      <span (click)="visitInfoModalPopUp(visitinfomodalcontent,'visitinfo', resourceItemDataArray.encounterId)"> Visit Info </span>
                  </div>
                  <div class=" vinfoboxlink" *ngIf="resourceItemDataArray.encounterId==''" style="display: none;">
                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Visit Info </span>
                  </div>
                  
                  </td>
                  <td>
                    
    
                    <div class="text-body" >
                          <span class="ml-2x" *ngFor="let datar of resourceItemDataArray.readings;let r=index;">
                          {{datar.componentValue}} {{datar.componentUnit}} 
                          </span>
                    </div>
                  </td>
                  <td>
                    <div class="text-body" >
                      <span class="ml-2x">{{resourceItemDataArray.resourceDate}}</span>
                    </div>
                  </td>              
                  <td>
                    <div class="text-body" >
                      <span class="ml-2x">{{resourceItemDataArray.entityName}}</span>
                    </div>
                  </td>
    
              </tr>     
    
          </tbody>
  </table>

</div>


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='labreports'">
  
  <div class="datatableMenu" style="height: 50px;">
    <div id="breadcum" style="width: 70%;float: left;">
        <!--
            <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
                <img src="./assets/icon/home-breadcum-icon.svg" />
            </a></span>
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>  
            <span style="text-transform: capitalize;font-weight: bold;"> 360 View </span> 
            <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
            -->  
        <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Lab Reports </span>  
    </div> 
    <div id="filterarea" style="width: 40%;float: left;">
    
    </div>
  </div>


  <div id="filterareanew" [ngClass]="{'tablehide': !loading, 'tableshow': loading}">

    <form class="form-inline" style="float: right;padding: 5px;">
      <label style="color: #333;">Date :</label>
      <div class="form-group hidden">
        <div class="input-group">
          <input name="datepicker"
                 class="form-control"
                 ngbDatepicker
                 #datepicker="ngbDatepicker"
                 [autoClose]="'outside'"
                 (dateSelect)="onDateSelection($event,datepicker)"
                 [displayMonths]="2"
                 [dayTemplate]="t"
                 outsideDays="hidden"
                 [startDate]="fromDate!"
                 tabindex="-1">
          <ng-template #t let-date let-focused="focused">
            <span class="custom-day"
                  [class.focused]="focused"
                  [class.range]="isRange(date)"
                  [class.faded]="isHovered(date) || isInside(date)"
                  (mouseenter)="hoveredDate = date"
                  (mouseleave)="hoveredDate = null">
              {{ date.day }}
            </span>
          </ng-template>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group">
          <input #dpFromDate readonly (click)="datepicker.toggle()"
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpFromDate"
                 [value]="formatter.format(fromDate)"
                 (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
          <input #dpToDate readonly (click)="datepicker.toggle()"
                 class="form-control" placeholder="yyyy-mm-dd"
                 name="dpToDate"
                 [value]="formatter.format(toDate)"
                 (input)="toDate = validateInput(toDate, dpToDate.value)">
        </div>
      </div>
      <div class="form-group ml-2">
        <div class="input-group">
    
          <div class="input-group-append">
            <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button">
              <img src="./assets/icon/icon-calendar-picker.svg" />
            </button>
          </div>
          <div class="input-group-append">
            <button *ngIf=" toDate!='' " class="btn btn-outline-secondary calendar" (click)="datepickerclear()" type="button">
              <img src="./assets/icon/clear.png" />
            </button>
          </div>
        </div>
      </div>
    </form>

  </div>  
   
  <table [ngClass]="{'tablehide': !loading, 'tableshow': loading}" class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
    <thead>
    <tr> 
        <th style="width:1200px;">Diagnostics <span class="sort">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></th>
    </tr>
    </thead>

    <tbody>
        <tr *ngFor="let resourceItemDataArray of data let i = index;">
        
            <td>
              <!--<div class="text-body" data-toggle="collapse" [attr.data-target]="'#visitexpnd' + i" style="cursor: pointer;">
              </div>-->
                <div class="text-body" [ngClass]=" addclass " data-toggle="collapse" [attr.data-target]="'#visitexpnd' + i" style="cursor: pointer;" (click)="clickeventlab($event,'#visitexpnd' + i, i)" > 
                
                    <img class="plusicon" *ngIf=" selectedlabIndex != i " src="./assets/icon/visit-expend-icon.svg" id="closed" />
                    <img class="minusicon" *ngIf=" selectedlabIndex === i " src="./assets/icon/visit-unexpend-icon.svg" id="opened" />
            
                    <span class="ml-2x" style="padding-left: 15px;"> Lab work done at {{resourceItemDataArray.entityName}} on {{resourceItemDataArray.resourceDate}}</span>
                
                </div>    
                <div id="visitexpnd{{i}}" *ngIf=" selectedlabIndex === i " class="collapse show"  style="padding-top: 10px;border-top: 1px solid #ccc;margin-top: 10px;">
                    
                    <div *ngFor="let resourceItemData of resourceItemDataArray.reports let j = index;" style="border-bottom: 1px solid #ccc;color: #2687C6;cursor: pointer;">
                        <!-- (click)="showVisitDetailModal('diagnosticreport',resourceItemData.resourceId)" -->            
                        <div class="text-body" (click)="labModalPopUp(labitemcontent, 'diagnosticreport',resourceItemData.resourceId)" >
                            <span class="">
                            <!--    
                                {{resourceItemData.coding.code}}<img src="./assets/sh360/lab-{{resourceItemData.coding.code}}.png" width="32" height="32" class="img-thumbnail" alt="{{resourceItemData.class}}"> &nbsp;&nbsp;
                            -->
                            <img src="./assets/icon/report-page-icon.svg" width="32" height="32" class="img-thumbnail" alt="{{resourceItemData.class}}"> &nbsp;&nbsp;
                            </span>
                            <span class="ml-2x">{{resourceItemData.coding.display}}</span>
                             -  
                            <span class="ml-2x">{{resourceItemData.entityName}}</span>
                        </div> 

                    </div>         
                </div>

              
            </td>    
        </tr>     

    </tbody>
</table>

 </div>

 <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceTypeValue=='medicationadherence' && loading ">
    
  <div class="pad-left-0" style="height: 100%;">

    <div class="datatableMenu" style="height: 50px;">
      <div id="breadcum" style="width: 75%;float: left;">
      
      <!--
      <span><a href="javascript:void(0);" (click)="showPage('home')" class="mouse-pointer">
      <img src="./assets/icon/home-breadcum-icon.svg" />
      </a></span>
      <span>&nbsp;&nbsp; / &nbsp;&nbsp;</span>
      -->  
      <!--<span style="text-transform: capitalize;font-weight: bold;"> Medication Adherence </span>-->
      <span style="text-transform: capitalize;font-style: normal;font-weight: bold;font-size: 19px;line-height: 22px;color: #2D3748;"> Medication Adherence </span>
      </div>
      <div id="filterarea" style="width: 25%;float: left;">
          
          <div class="row form-group" style="margin:0px;">
            <!--
              <div class="col-sm" style="width:90px;float: left;">
                  <label for="Taken">Taken</label>
                  <span style="position: absolute; width: 18px; height: 18px; background: #9FDCC7;  border: 1px solid #9FDCC7;box-sizing: border-box;margin-left: 10px;"></span>
              </div>
              <div class="col-sm" style="width:100px;float: left;">
                <label for="Skipped">Skipped</label>
                <span style="position: absolute; width: 18px; height: 18px; background: #E8AA74;  border: 1px solid #E8AA74;box-sizing: border-box;margin-left: 10px;"></span>
              </div>
            -->
            <!--
              <div class="col-sm" style="width:115px;float: left;">
                <label for="Upcoming">Upcoming</label>
                <span style="position: absolute; width: 18px; height: 18px; background: #BFCCED;  border: 1px solid #BFCCED;box-sizing: border-box;margin-left: 10px;"></span>
              </div>
              <div class="col-sm" style="width:100px;float: left;">
                <label for="Not-Tracked">Not-Tracked</label>
                <span style="position: absolute; width: 18px; height: 18px; background: #E8E8E8;  border: 1px solid #E8E8E8;box-sizing: border-box;margin-left: 10px;"></span>
              </div>
            -->
          </div>
      
      </div>
    </div>


    <div class="" style="height: 100%; background: #fff;">
      
      <div class="med-report-side-box" style="height: 100%; width: 380px;float:left;border: 1px solid rgba(232, 232, 232, 1.0);min-width: 380px;">
      
      <div class="medicationcalendar" style="height: 410px;">


        <div id="calnavview" style="height: 50px;">

          <div style="width: 50%;float: left;">  
            <button *ngIf="monthView" style="margin: 15px 0px 0px 15px;color: #cacaca;background: #FBFBFB;font-weight: bold;" class="btn btn-sm btn-outline-primary mr-2" (click)="selectMonth()">Month</button>
            <button *ngIf="!monthView" style="margin: 15px 0px 0px 15px;color:#0072BC;font-weight: bold;" class="btn btn-sm btn-outline-primary mr-2" (click)="selectMonth()">Month</button>
            <button *ngIf="yearView" style="margin: 15px 15px 0px 0px;color: #cacaca;background: #FBFBFB;font-weight: bold;" class="btn btn-sm btn-outline-primary mr-2" (click)="selectYear()">Year</button>
            <button *ngIf="!yearView" style="margin: 15px 15px 0px 0px;color:#0072BC;font-weight: bold;" class="btn btn-sm btn-outline-primary mr-2" (click)="selectYear()">Year</button>
          </div>
  
          <div style="width: 50%;float: left;" *ngIf=" !yearView && systemYear === systemCurrentYear ">
            <button *ngIf=" systemMonth === systemCurrentMonth " class="btn btn-sm btn-outline-primary mr-2" style="margin: 15px 15px 0px 0px;color: #cacaca;background: #FBFBFB;font-weight: bold;padding: 5px 8px;"  mwlCalendarToday [(viewDate)]="viewDate" (viewDateChange)="selectCurrentMonth('plus')">Jump to current month</button>
            <button *ngIf=" systemMonth !== systemCurrentMonth " class="btn btn-sm btn-outline-primary mr-2" style="margin: 15px 15px 0px 0px;color:#0072BC;font-weight: bold;padding: 5px 8px;"  mwlCalendarToday [(viewDate)]="viewDate" (viewDateChange)="selectCurrentMonth('plus')">Jump to current month</button>
          </div>
          <div style="width: 50%;float: left;" *ngIf=" yearView || systemYear !== systemCurrentYear ">
            <button class="btn btn-sm btn-outline-primary mr-2" style="margin: 15px 15px 0px 0px;color:#0072BC;font-weight: bold;padding: 5px 8px;"  mwlCalendarToday [(viewDate)]="viewDate" (viewDateChange)="selectCurrentMonth('plus')">Jump to current month</button>
          </div>    

      </div>
       
      <div id="monthlyview" *ngIf="monthView">

        <div class="row text-center">
          <div class="col-md-3">
              <div class="btn-group">
                <div class="btn btn-primary calbtn" mwlCalendarPreviousView [view]="view" [(viewDate)]="viewDate" (viewDateChange)="closeOpenMonthViewDay('minus')" >
                   <!-- <i class="fa fa-chevron-left" aria-hidden="true"></i> -->
                   <img src="./assets/icon/icon-left-on.png" style="width: 10px;" />
                </div>
              </div>
          </div>
          <div class="col-md-6">
            <h3 style="font-size:18px; margin:8px 0px;">{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
          </div>

          <div class="col-md-3" *ngIf=" systemYear === systemCurrentYear ">
            <div class="btn-group" *ngIf=" systemMonth !== systemCurrentMonth ">
              <div class="btn btn-primary calbtn" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate" (viewDateChange)="closeOpenMonthViewDay('plus')" > 
                <!-- <i class="fa fa-chevron-right" aria-hidden="true"></i> -->
                <img src="./assets/icon/icon-right-on.png" style="width: 10px;" />
              </div>
            </div>
            <div class="btn-group" *ngIf=" systemMonth === systemCurrentMonth ">
              <div class="btn btn-primary calbtn" > 
                <!-- <i class="fa fa-chevron-right" aria-hidden="true" style="color: #ccc;"></i> -->
                <img src="./assets/icon/icon-right-off.png" style="width: 10px;" />
              </div>
            </div>
          </div>
          <div class="col-md-3" *ngIf=" systemYear !== systemCurrentYear ">
            <div class="btn-group">
              <div class="btn btn-primary calbtn" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate" (viewDateChange)="closeOpenMonthViewDay('plus')" > 
                <!-- <i class="fa fa-chevron-right" aria-hidden="true"></i> -->
                <img src="./assets/icon/icon-right-on.png" style="width: 10px;" />
              </div>
            </div>
          </div>

        </div>

        <div [ngSwitch]="view">
        
          <mwl-calendar-month-view
            *ngSwitchCase="CalendarView.Month"
            [viewDate]="viewDate"
            [events]="events"
            [refresh]="refresh"
            [activeDayIsOpen]="activeDayIsOpen"
            (dayClicked)="dayClicked($event.day)"
            (eventClicked)="handleEvent('Clicked', $event.event)"
            (eventTimesChanged)="eventTimesChanged($event)"
          >
          </mwl-calendar-month-view>
        
        </div>
      
      </div>  

      <div id="yearlyview" *ngIf="yearView">
        <style>
          #yearcalview { display:noneX !important; }
        </style>
        <div id="yearcalview" class="row text-center">
          <div class="col-md-3">
              <div class="btn-group">
                <div class="btn btn-primary calbtn" (click)="closeOpenYearViewDay('minus')"> 
                <!-- <i class="fa fa-chevron-left" aria-hidden="true"></i> -->
                <img src="./assets/icon/icon-left-on.png" style="width: 10px;" />  
                </div>
              </div>
          </div>
          <div class="col-md-6">
            <h3 style="font-size:18px; margin:8px 0px;">{{systemYear}} </h3>
          </div>
          <div class="col-md-3" *ngIf=" systemYear === systemCurrentYear ">
            <div class="btn-group">
              <div class="btn btn-primary calbtn"  > 
                <!-- <i class="fa fa-chevron-right" aria-hidden="true" style="color:#ccc;"></i> -->
                <img src="./assets/icon/icon-right-off.png" style="width: 10px;" />
              </div>
            </div>
          </div>
          <div class="col-md-3" *ngIf=" systemYear !== systemCurrentYear ">
            <div class="btn-group">
              <div class="btn btn-primary calbtn"  (click)="closeOpenYearViewDay('plus')">
                <!-- <i class="fa fa-chevron-right" aria-hidden="true"></i> -->
                <img src="./assets/icon/icon-right-on.png" style="width: 10px;" />
              </div>
            </div>
          </div>
        </div>

        <div id="yearcalview"> 
           <ul class="calcyearview" *ngIf=" systemYear === systemCurrentYear ">
            <li *ngFor="let ydata of yearmonthsArray; let y-index;" > 
            
              <div *ngIf=" systemCurrentMonth < ydata.digit " mwlCalendarNextView [view]="view" [(viewDate)]="viewDate" style="cursor: auto;">
                
                <span class="monthbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                  {{ydata.name}}
                </span> 

                <span class="monthbox" *ngIf=" systemCurrentMonth < ydata.digit " style="opacity: 0.5;">
                  {{ydata.name}}
                </span> 

                <span class="greenbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                  {{medicationYearlyDataArray[ydata.digit].data.takenPercent}}%
                </span>
                
                <span class="redbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                  {{medicationYearlyDataArray[ydata.digit].data.skippedPercent}}%
                </span>

              </div>

              <div *ngIf=" systemCurrentMonth >= ydata.digit " mwlCalendarNextView [view]="view" [(viewDate)]="viewDate" (viewDateChange)="selectYearMonth(systemYear,ydata.digit)" style="cursor: pointer;">
                
                <span class="monthbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                  {{ydata.name}}
                </span> 

                <span class="monthbox" *ngIf=" systemCurrentMonth < ydata.digit " style="opacity: 0.5;">
                  {{ydata.name}}
                </span> 

                <span class="greenbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                  {{medicationYearlyDataArray[ydata.digit].data.takenPercent}}%
                </span>
                
                <span class="redbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                  {{medicationYearlyDataArray[ydata.digit].data.skippedPercent}}%
                </span>
              
              </div>

            </li>
            <!--
            <li *ngFor="let ydata of yearmonthsArray; let y-index;" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate" (viewDateChange)="selectYearMonth(systemYear,ydata.digit)" style="cursor: pointer;"> 
              <span class="monthbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                {{ydata.name}}
              </span> 

              <span class="monthbox" *ngIf=" systemCurrentMonth < ydata.digit " style="opacity: 0.5;">
                {{ydata.name}}
              </span> 

              <span class="greenbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                {{medicationYearlyDataArray[ydata.digit].data.takenPercent}}%
              </span>
              
              <span class="redbox" *ngIf=" systemCurrentMonth >= ydata.digit ">
                {{medicationYearlyDataArray[ydata.digit].data.skippedPercent}}%
              </span>
            </li>
          -->
          </ul>
          <ul class="calcyearview" *ngIf=" systemYear !== systemCurrentYear ">
            <li *ngFor="let ydata of yearmonthsArray; let y-index;" mwlCalendarNextView [view]="view" [(viewDate)]="viewDate" (viewDateChange)="selectYearMonth(systemYear,ydata.digit)" style="cursor: pointer;"> 
              <span class="monthbox" >
                {{ydata.name}}
              </span>  

              <span class="greenbox" >
                {{medicationYearlyDataArray[ydata.digit].data.takenPercent}}%
              </span>
              
              <span class="redbox" >
                {{medicationYearlyDataArray[ydata.digit].data.skippedPercent}}%
              </span>
            </li>
          </ul>

        </div>
      </div>  
      

      </div>  

      <div class="medicationlist" style="height: 265px;border-top: 1px solid #cacaca;">
         
        <span style="font-weight: bold;padding: 5px 0px 5px 10px;text-transform: uppercase;position: absolute;color:#000000;"> MEDICATION SUMMARY </span>  
        <br/>
        <ul class="nav navbar-nav" style="width: 100%;padding-top: 10px;">
        <li class="dropdownX messages-menuX openX" style="width: 100%;"> 
              <ul class="dropdown-menuX" style="width: 100%;border: none;padding: 0px 0px 0px 5px;margin: 0px;">
                    <li *ngIf=" medicationlistDataCount == 0 || medicationlistDataCount == null" style="min-height: 200px;">
                        <p style="padding: 25px;">No Medication Reports</p>
                    </li>
                    <li *ngIf=" medicationlistDataCount > 0 " style="background: none;min-height: 283px;height: 283px;overflow-x: none;overflow-y: scroll;">
                      
                        <ul class="menuX" style="padding: 0px;margin: 0px;">

                            <li *ngFor="let data of medicationlistData;let i=index;" style="cursor: default;border-bottom: 1px solid #ccc;padding: 8px 0px;    min-height: 115px;"><!-- start message -->
                              
                              <!--
                              <a href="javascript:void(0);" [class.active]="selectedItem == i" (click)="showReportPage('medicationreport', data.resourceId, selectedItem=i)" class="border-gray" >
                              </a>
                              -->
                              <div class="border-gray" >
                                <div id="ss" style="min-height: 40px;">
                                <div class="pull-left"><img src="./assets/icon/icon_pills.svg" class="img-thumbnail" alt="User Image" /></div>
                                <!--<p><span class="active-class" *ngIf="data.isActive === true"></span></p>-->
                                <h4 class="med-name">{{data.medicine.description}}</h4>
                                <p class="med-dosage" *ngIf=" data.medicine.dosageQty>0 ">{{data.medicine.dosageQty}} {{data.medicine.dosageUnit}}</p>
                                </div>
                                <progress-bar [progress]="data.percentage" [color]="'#13A783'" [color-degraded]="{'0': '#fd8c8e',  '25': '#fd8c8e',  '50': '#13A783', '75': '#13A783'}" style="width: 85%;float: left;margin: 0px;padding: 0px;">
                                  {{data.percentage}}
                                </progress-bar>   
                              
                                <!--<ion-progress-bar value="{{data.percentage/100}}" class="" color="">{{data.percentage}}</ion-progress-bar>-->
                                <p class="med-duration" style="margin: 0px 10px;top: 5px;">
                                  <!--<span class="" > &nbsp; {{data.percentage}} % on course and {{data.remainingDays}} days remaining </span>-->
                                  <span class="tooltipcustom" style="float: right ;">
                                    <img src="./assets/icon/tooltip-medicationreport.svg"  />
                                    
                                    <span class="tooltipcustomtext"> 
                                      
                                      <div *ngFor="let periodsdata of data.periods;let p=index;">
                                        &nbsp;  &nbsp; {{periodsdata.date}}&nbsp; &nbsp;  &nbsp; &nbsp; 
                                        <span *ngIf=" periodsdata.days <= 365 " > ( {{periodsdata.days}} Days )&nbsp; &nbsp;  </span> 
                                        <span *ngIf=" periodsdata.days > 365 " > ( Lifetime )&nbsp; &nbsp;  </span> 
                                       </div>
                                       
                                     </span>
                                  </span> 
                                  <span *ngIf=" data.totalDays <= 365 " style="float: right;padding: 24px 15px 0px 0px;margin: 0px -40px;" >{{data.totalDays}} Days</span>
                                  <span *ngIf=" data.totalDays > 365 " style="float: right;padding: 24px 15px 0px 0px;margin: 0px -40px;" > Lifetime </span>
                                </p>
                                <div>
                                  <span class="" style="float: left;"> &nbsp; {{data.percentage}} % on course and {{data.remainingDays}} days remaining </span>
                                </div>
                                
                              </div>
                              
                               
                            </li> 
                        </ul>
                    </li>
              </ul>
       </li>
       </ul>	
       
      </div>

      </div>
      
      <div class="med-report-main-box" style="height: 100%; width: 100%;border: 1px solid rgba(232, 232, 232, 1.0);padding: 0px;width: auto !important;margin-top: 0px !important;margin-right: 0px !important;margin-bottom: 0px !important;margin-left: 380px !important;display: block;">
        
        <div class="" *ngIf="ChartresourceId ==''" style="padding: 0px;">
            
          <div class="welcome-card" style="min-height: 730px;-webkit-box-shadow: none; box-shadow: none; "> 
                <div style="padding: 150px 0px !important;">
                  <div style="position: static;width: 400px;height: 200px;background: #FBFBFB;border-radius: 17px;text-align: center;padding: 30px;margin: auto;">
                    <p><img src="./assets/icon/noimg-medicationreport.svg" /></p>
                    <b> 
                      <!--No adherence report available-->
                      Please click on a day on the calendar to see the Medical Adherence Report
                    </b>
                  </div>
              </div>
          </div>

        </div> 

        <div class="" *ngIf="ChartresourceId !=''" style="padding: 0px;">

          <div class="" *ngIf="medicationDetailDataArray.length == 0 " style="padding: 0px;">
            
            <div class="welcome-card" style="min-height: 730px;-webkit-box-shadow: none; box-shadow: none; "> 
              <div style="padding: 150px 0px !important;">
                <div style="position: static;width: 400px;height: 200px;background: #FBFBFB;border-radius: 17px;text-align: center;padding: 30px;margin: auto;">
                  <p><img src="./assets/icon/noimg-medicationreport.svg" /></p>
                  <b> 
                    <!--No adherence report available-->
                    Please click on a day on the calendar to see the Medical Adherence Report
                    <!--Please click on a day on the calendar to see the Medical Adherence Report-->
                  </b>
                </div>
              </div>
          </div>

          </div> 

          <div class="" *ngIf="medicationDetailDataArray.length > 0 " style="padding: 10px 0px 0px 20px;">
            
          
          <div class="welcome-card" style="min-height:630px;-webkit-box-shadow: none;box-shadow: none;overflow-x: hidden !important;overflow-y: scroll !important;">
         
        
          
          <div style="width: 100%; float: left; min-height:30px;">
            <p class="comment-box-title">Showing Adherence Report for {{ resourceDateValue | date }}</p>
          </div>
          <!--{{medicationDetailDataArray | json}}-->
            <ul class="nav nav-tabs" style="margin-top:40px">
              <li *ngFor="let medicationDetailData of medicationDetailDataArray;let i=index;" [ngClass]="i === MedTabID ? 'active' : ''">
                  <!--   <a data-toggle="tab" href="#{{medicationDetailData.resourceId}}" (click)="MedTab(medicationDetailData.resourceId)"  >{{medicationDetailData.medicine.description}}</a> -->
                <a data-toggle="tab" (click)="MedTab(i)" href="javascript:void(0);"  >{{medicationDetailData.medicine.description}}</a>
              </li>
              
            </ul>
          
            <div class="tab-content">
              <div *ngFor="let medicationDetailData of medicationDetailDataArray;let i=index;" id="{{medicationDetailData.resourceId}}"  [ngClass]="i === MedTabID ? 'tab-pane in active' : 'tab-pane fade '" >
                
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-10" >
             
                  <section id="cd-timeline" class="cd-container">
   
      
                    <div class="med-summary" style="width: 100%; min-width: 400px; float: left; min-height:60px;display: none;">
                      <span class="border-gray" style="cursor: default;">
                      
                        <h4>{{medicationDetailData.medicine.description}}&nbsp;
                        <span class="med-active-class-box" *ngIf="medicationDetailData.status =='active'"> 
                          <span class="med-active-class-text">Active Medication</span>
                          <span class="med-active-class"></span>
                        </span>
                        </h4>
                        <span></span>
                        
                      </span>
                    </div>
                   
                  <div style="width: 100%; float: left;min-height: 80px;padding-top:20px;">
  
                    <div style="width: 250px;float: left;" *ngIf="medicationDetailData.medicine.dosageQty != null; else notShowUnit">
                      <p class="comment-box-title">Strength/Concentration/Units:</p>
                      <hr class="comment-box-line" />
                      <p style="font-weight: bold;color: #000000;" *ngIf=" medicationDetailData.medicine.dosageQty > 0 ">{{medicationDetailData.medicine.dosageQty}}&nbsp; {{medicationDetailData.medicine.dosageUnit}}</p>
                    </div>                  
                    <ng-template #notShowUnit>
                      <div style="width: 250px;float: left;">
                        <p class="comment-box-title">Strength/Concentration/Units:</p>
                        <hr class="comment-box-line" />
                        <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                      </div>
                    </ng-template>
  
                    <!--
                    <div style="width: 320px;float: left;" *ngIf="medicationDetailData.medicine.startDate != null; else notShowPeroid">
                      <p class="comment-box-title">Course Peroid:</p>
                      <hr class="comment-box-line" />
                      <p style="font-weight: bold;color: #000000;"> &nbsp;<span class="new-textXYZ" *ngIf=" medicationDetailData.duration.startDate != null "> {{medicationDetailData.duration.startDate }} - {{medicationDetailData.duration.endDate }}</span> <br/> </p>
                    </div>                  
                    <ng-template #notShowPeroid>
                      <div style="width: 320px;float: left;">
                        <p class="comment-box-title">Course Peroid:</p>
                        <hr class="comment-box-line" />
                        <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                      </div>
                    </ng-template>
                    -->

                    <!--
                    <div style="width: 320px;float: left;" *ngIf="medicationDetailData.medicine.instruction != null; else notShowInstruction">
                      <p class="comment-box-title">Dosage Instruction:</p>
                      <hr class="comment-box-line" />
                      <p style="font-weight: bold;color: #000000;"> {{medicationDetailData.medicine.instruction}} </p>
                    </div>
                    <ng-template #notShowInstruction>
                      <div style="width: 320px;float: left;">
                        <p class="comment-box-title">Dosage Instruction:</p>
                        <hr class="comment-box-line" />
                        <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                      </div>
                    </ng-template>
                    -->
                  </div>  
  
                    <!--
                    <div style="width: 100%;min-width: 400px; float: left; min-height: 120px;">
                      <p class="comment-box-title">Medication Summary</p>
                      <hr class="comment-box-line" />
                      <div *ngIf="medicationDetailDataSummaryStatus.takenPercent != null; else notShowTAKENRange">
                        <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                          <span class="text-span-taken" data-content="">{{medicationDetailDataSummaryStatus.takenPercent}} %</span>
                          TAKEN
                        </div>
                      </div>
                      <ng-template #notShowTAKENRange>
                        <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                          <span class="text-span-taken" data-content="">0 %</span>
                          TAKEN
                        </div>
                      </ng-template>
  
                      <div *ngIf="medicationDetailDataSummaryStatus.takenPercent != null; else notShowSKIPPEDRange">
                        <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                          <span class="text-span-skipped" data-content="">{{medicationDetailDataSummaryStatus.skippedPercent}} %</span>
                          SKIPPED
                        </div> 
                      </div>  
                      
                      <ng-template #notShowSKIPPEDRange>
                        <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                          <span class="text-span-skipped" data-content="">0 %</span>
                          SKIPPED
                        </div>
                      </ng-template>
  
                      
                      <br/><br/>
                    </div> 
                  -->
    
                      
               
                    <div style="width: 400px;float: left;" *ngIf=" medicationDetailData.times.length > 0; else notShowTiming">
                      <!--
                      <p class="comment-box-title">Frequency Information:</p>
                      <hr class="comment-box-line" />
                      -->  
                      <div id="cd-timeline-wall" > 
                      <div class="cd-timeline-block" *ngFor="let tdata of medicationDetailData.times;let i=index;">
                        <div class="cd-timeline-icon text-center {{tdata.color}}"> 
                        </div>
                        <div class="cd-timeline-content padding ">
                          <h5 class="marginBottom0 marginTop0" style=" color: #9E9E9F; font-weight: bold;" *ngIf=" tdata.responseTime != '' " >
                          <span *ngIf=" tdata.color === 'RED' " style="color:#ff0000ab;">
                           Medication skipped at {{tdata.responseTime}}
                          </span>
                          <span *ngIf=" tdata.color === 'GREEN' " style="color:#008000ad;">
                            Medication taken at {{tdata.responseTime}}
                           </span>
                          </h5>
                          <h5 class="marginBottom0 marginTop0" style=" color: #9E9E9F; font-weight: bold;" *ngIf=" tdata.responseTime == '' " >
                            No responses were logged for the reminder set at {{tdata.reminderTime}}
                          </h5>
                          
                          
                          <p class="timelineText" *ngIf=" medicationDetailData.medicine.instruction != '' ">  {{medicationDetailData.medicine.instruction}} </p>
                          <p class="timelineText" *ngIf=" medicationDetailData.medicine.instruction == '' ">   </p>
                          

                          <p class="timelineText" *ngIf=" tdata.color === 'RED' " style="width: fit-content;background: #efefef;padding: 5px;">  {{tdata.notes}}  </p>
                      
                        </div>
                      </div>
                    
                      </div>
                    </div>
               
                    <ng-template #notShowTiming>
                      <div style="width: 400px;float: left;">
                        <p class="comment-box-title">Frequency Information:</p>
                        <hr class="comment-box-line" />
                        <p><i>No Data Found</i></p>
                      </div>
                    </ng-template>
                  </section>
                
                </div>
            
              </div> 
            </div>
         

         
          <!--  
            <div style="padding: 10px;width:100%;" *ngFor="let medicationDetailData of medicationDetailDataArrayX;let i=index;" >

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-10" >
             
              <section id="cd-timeline" class="cd-container">

  
                <div class="med-summary" style="width: 100%; min-width: 400px; float: left; min-height:60px;">
                  <span class="border-gray" style="cursor: default;">
                  
                    <h4>{{medicationDetailData.medicine.description}}&nbsp;
                    <span class="med-active-class-box" *ngIf="medicationDetailData.status =='active'"> 
                      <span class="med-active-class-text">Active Medication</span>
                      <span class="med-active-class"></span>
                    </span>
                    </h4>
                    <span></span>
                    
                  </span>
                </div>
               
              <div style="width: 100%; float: left;min-height: 80px;">

                <div style="width: 250px;float: left;" *ngIf="medicationDetailData.medicine.dosageQty != null; else notShowUnit">
                  <p class="comment-box-title">Strength/Concentration/Units:</p>
                  <hr class="comment-box-line" />
                  <p style="font-weight: bold;color: #000000;">{{medicationDetailData.medicine.dosageQty}}&nbsp; {{medicationDetailData.medicine.dosageUnit}}</p>
                </div>                  
                <ng-template #notShowUnit>
                  <div style="width: 250px;float: left;">
                    <p class="comment-box-title">Strength/Concentration/Units:</p>
                    <hr class="comment-box-line" />
                    <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                  </div>
                </ng-template>

                <div style="width: 320px;float: left;" *ngIf="medicationDetailData.medicine.startDate != null; else notShowPeroid">
                  <p class="comment-box-title">Course Peroid:</p>
                  <hr class="comment-box-line" />
                  <p style="font-weight: bold;color: #000000;"> &nbsp;<span class="new-textXYZ" *ngIf=" medicationDetailData.duration.startDate != null "> {{medicationDetailData.duration.startDate }} - {{medicationDetailData.duration.endDate }}</span> <br/> </p>
                </div>                  
                <ng-template #notShowPeroid>
                  <div style="width: 320px;float: left;">
                    <p class="comment-box-title">Course Peroid:</p>
                    <hr class="comment-box-line" />
                    <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                  </div>
                </ng-template>

                <div style="width: 320px;float: left;" *ngIf="medicationDetailData.medicine.instruction != null; else notShowInstruction">
                  <p class="comment-box-title">Dosage Instruction:</p>
                  <hr class="comment-box-line" />
                  <p style="font-weight: bold;color: #000000;"> {{medicationDetailData.medicine.instruction}} </p>
                </div>
                <ng-template #notShowInstruction>
                  <div style="width: 320px;float: left;">
                    <p class="comment-box-title">Dosage Instruction:</p>
                    <hr class="comment-box-line" />
                    <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                  </div>
                </ng-template>

              </div>  


                <div style="width: 100%;min-width: 400px; float: left; min-height: 120px;">
                  <p class="comment-box-title">Medication Summary</p>
                  <hr class="comment-box-line" />
                  <div *ngIf="medicationDetailDataSummaryStatus.takenPercent != null; else notShowTAKENRange">
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-taken" data-content="">{{medicationDetailDataSummaryStatus.takenPercent}} %</span>
                      TAKEN
                    </div>
                  </div>
                  <ng-template #notShowTAKENRange>
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-taken" data-content="">0 %</span>
                      TAKEN
                    </div>
                  </ng-template>

                  <div *ngIf="medicationDetailDataSummaryStatus.takenPercent != null; else notShowSKIPPEDRange">
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-skipped" data-content="">{{medicationDetailDataSummaryStatus.skippedPercent}} %</span>
                      SKIPPED
                    </div> 
                  </div>  
                  
                  <ng-template #notShowSKIPPEDRange>
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-skipped" data-content="">0 %</span>
                      SKIPPED
                    </div>
                  </ng-template>

                  
                  <br/><br/>
                </div> 

                 
                

           
                <div style="width: 400px;float: left;" *ngIf=" medicationDetailDataTiming.timesPerDay > 0; else notShowTiming">
                  <p class="comment-box-title">Frequency Information:</p>
                  <hr class="comment-box-line" />

                  <div id="cd-timeline-wall" > 
                  <div class="cd-timeline-block" *ngFor="let tdata of medicationDetailDataTiming.timeOfDay;let i=index;">
                    <div class="cd-timeline-icon text-center "> 
                    </div>
                    <div class="cd-timeline-content padding ">
                      <h5 class="marginBottom0 marginTop0">{{tdata}}</h5>
                      
                      <p class="timelineText" *ngIf=" medicationDetailData.medicine.instruction != null ">  {{medicationDetailData.medicine.instruction}}  </p>
                  
                    </div>
                  </div>
                
                  </div>
                </div>
           
                <ng-template #notShowTiming>
                  <div style="width: 400px;float: left;">
                    <p class="comment-box-title">Frequency Information:</p>
                    <hr class="comment-box-line" />
                    <p><i>No Data Found</i></p>
                  </div>
                </ng-template>
              </section>
            
            </div>


            </div>
          -->

      </div>
         
          
          </div>   

        </div>

        <!--
        <div class="" *ngIf="ChartresourceId !=''" style="padding: 0px;">
        
          <ion-card class="welcome-card" style="min-height:580px;-webkit-box-shadow: none;box-shadow: none;overflow-x: hidden !important;overflow-y: scroll !important;">
          <div style="padding: 10px;width:100%;">

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-10" >
             
              <section id="cd-timeline" class="cd-container">

  
                <div class="med-summary" style="width: 100%; min-width: 400px; float: left; min-height:60px;">
                  <span class="border-gray" style="cursor: default;">
                  
                    <h4>{{medicationDetailData.medicine.description}}&nbsp;
                    <span class="med-active-class-box" *ngIf="medicationDetailData.status =='active'"> 
                      <span class="med-active-class-text">Active Medication</span>
                      <span class="med-active-class"></span>
                    </span>
                    </h4>
                    <span></span>
                    
                  </span>
                </div>
               
              <div style="width: 100%; float: left;min-height: 80px;">

                <div style="width: 250px;float: left;" *ngIf="medicationDetailData.medicine.dosageQty != null; else notShowUnit">
                  <p class="comment-box-title">Strength/Concentration/Units:</p>
                  <hr class="comment-box-line" />
                  <p style="font-weight: bold;color: #000000;">{{medicationDetailData.medicine.dosageQty}}&nbsp; {{medicationDetailData.medicine.dosageUnit}}</p>
                </div>                  
                <ng-template #notShowUnit>
                  <div style="width: 250px;float: left;">
                    <p class="comment-box-title">Strength/Concentration/Units:</p>
                    <hr class="comment-box-line" />
                    <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                  </div>
                </ng-template>

                <div style="width: 320px;float: left;" *ngIf="medicationDetailData.medicine.startDate != null; else notShowPeroid">
                  <p class="comment-box-title">Course Peroid:</p>
                  <hr class="comment-box-line" />
                  <p style="font-weight: bold;color: #000000;"> &nbsp;<span class="new-textXYZ" *ngIf=" medicationDetailData.duration.startDate != null "> {{medicationDetailData.duration.startDate }} - {{medicationDetailData.duration.endDate }}</span> <br/> </p>
                </div>                  
                <ng-template #notShowPeroid>
                  <div style="width: 320px;float: left;">
                    <p class="comment-box-title">Course Peroid:</p>
                    <hr class="comment-box-line" />
                    <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                  </div>
                </ng-template>

                <div style="width: 320px;float: left;" *ngIf="medicationDetailData.medicine.instruction != null; else notShowInstruction">
                  <p class="comment-box-title">Dosage Instruction:</p>
                  <hr class="comment-box-line" />
                  <p style="font-weight: bold;color: #000000;"> {{medicationDetailData.medicine.instruction}} </p>
                </div>
                <ng-template #notShowInstruction>
                  <div style="width: 320px;float: left;">
                    <p class="comment-box-title">Dosage Instruction:</p>
                    <hr class="comment-box-line" />
                    <p style="font-weight: bold;color: #000000;"><i>No Data Found</i></p> 
                  </div>
                </ng-template>

              </div>  


                <div style="width: 100%;min-width: 400px; float: left; min-height: 120px;">
                  <p class="comment-box-title">Medication Summary</p>
                  <hr class="comment-box-line" />
                  <div *ngIf="medicationDetailDataSummaryStatus.takenPercent != null; else notShowTAKENRange">
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-taken" data-content="">{{medicationDetailDataSummaryStatus.takenPercent}} %</span>
                      TAKEN
                    </div>
                  </div>
                  <ng-template #notShowTAKENRange>
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-taken" data-content="">0 %</span>
                      TAKEN
                    </div>
                  </ng-template>

                  <div *ngIf="medicationDetailDataSummaryStatus.takenPercent != null; else notShowSKIPPEDRange">
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-skipped" data-content="">{{medicationDetailDataSummaryStatus.skippedPercent}} %</span>
                      SKIPPED
                    </div> 
                  </div>  
                  
                  <ng-template #notShowSKIPPEDRange>
                    <div style="width: 200px;float: left;color: #000;font-weight: bold;">
                      <span class="text-span-skipped" data-content="">0 %</span>
                      SKIPPED
                    </div>
                  </ng-template>

                  
                  <br/><br/>
                </div> 

                 
                

           
                <div style="width: 400px;float: left;" *ngIf=" medicationDetailDataTiming.timesPerDay > 0; else notShowTiming">
                  <p class="comment-box-title">Frequency Information:</p>
                  <hr class="comment-box-line" />

                  <div id="cd-timeline-wall" > 
                  <div class="cd-timeline-block" *ngFor="let tdata of medicationDetailDataTiming.timeOfDay;let i=index;">
                    <div class="cd-timeline-icon text-center "> 
                    </div>
                    <div class="cd-timeline-content padding ">
                      <h5 class="marginBottom0 marginTop0">{{tdata}}</h5>
                      
                      <p class="timelineText" *ngIf=" medicationDetailData.medicine.instruction != null ">  {{medicationDetailData.medicine.instruction}}  </p>
                  
                    </div>
                  </div>
                
                  </div>
                </div>
           
                <ng-template #notShowTiming>
                  <div style="width: 400px;float: left;">
                    <p class="comment-box-title">Frequency Information:</p>
                    <hr class="comment-box-line" />
                    <p><i>No Data Found</i></p>
                  </div>
                </ng-template>
              </section>
            
            </div>

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 pad-left-0 ma-top-10" >
              <section id="cd-timelineX" class="cd-container">
                
                <div class="comment-box" *ngIf="medicationDetailData.summary.history.length > 0">
                  <p class="comment-box-title">Patient Comments / Remarks :</p>
                  <hr class="comment-box-line" />
                  <div *ngFor="let hdata of medicationDetailData.summary.history;let i=index;">

                    <div class="new-text-box" > 
                      <span class="new-text-time">{{hdata.datetime | date: "d MMM, y"}} - {{hdata.datetime | date: "hh:mm a"}} </span> 
                      <p>{{hdata.status}} - {{hdata.notes}} </p>
                    </div>

                  </div>
                
                </div>
                
                <div class="comment-box" *ngIf="medicationDetailData.summary.history.length == 0">
                    <p class="comment-box-title">Patient Comments / Remarks :</p>
                    <hr class="comment-box-line" />
                    <p><i>No Data Found</i></p>
                </div>    
                 
              </section>
            </div>
            
          </div>
          </ion-card>
         
        </div>
      -->

        
      </div>


    </div>


  </div>
     

 </div>

 <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf=" !loading ">
  <div class="center-screen-mid" >
    <div>
      <img src="./assets/icon/loading.gif" style="padding: 20px;" />
    </div>
    <p>
      Please wait, we are getting records...
    </p>
  </div>
</div> 


</div>
           </div>  
        </div>
      </div>
    </div>

  </div>
</div> 
<!--       
<a href="javascript:void(0);" class="dropdown-item notify-item" (click)="smallModal(changepasswordcontent)">
  <span>Change Password</span>
</a>
-->
<ng-template #alertcontent role="document" let-modal="close" id="modal-delete" style="width: 25%;">
  <div class="modal-body p-3" style="top: 10px;height: 250px;">
    <div class="text-left"> 
       <h4 style="text-align: center;">Turn off Reminder?</h4> 
        <div class="row">
          <div class="col-12">
            <p style="font-size: 14px;text-align: center;color: #DD6B20;padding: 20px 110px;">Warning! Turning off the Alert on would stop alerts and reset the preferences set within this medication.</p>
          </div>
        </div>
       <div class="row">
         <div class="col-6">
          <button class="btn btn-secondary" type="button" (click)="CancelReminderOff()" 
          style="width: 163px;height: 55px;background: #FFFFFF;border: 2px solid #AFAFAF;box-sizing: border-box;border-radius: 5px;float: right;font-size: 18px;color:#AFAFAF;">Cancel</button>
         </div>
         <div class="col-6">
          <button class="btn btn-secondary" type="button" (click)="ReminderOff(medicationReminderData.id)" 
          style="width: 163px;height: 55px;left: 610px;top: 418px;border: 2px solid #3182CE;box-sizing: border-box;border-radius: 5px;font-size:18px;color:#3182CE;">Yes, turn off</button>
         </div>
       </div>
       <!--
        <button type="button" (click)="CancelReminderOff()">Cancel</button>
        <button type="button" (click)="ReminderOff(medicationReminderData.id)" >Yes, turn off</button>
        -->
    </div>
  </div>
</ng-template>  

<ng-template #allalertcontent role="document" let-modal="close" id="modal-delete" style="width: 25%;">
  {{globalAlert}}
  <div *ngIf=" globalAlert " class="modal-body p-3" style="top: 10px;height: 250px;">
    <div class="text-left"> 
       <h4 style="text-align: center;">Turn off Reminder?</h4> 
        <div class="row">
          <div class="col-12">
            <p style="font-size: 14px;text-align: center;color: #DD6B20;padding: 20px 110px;">Warning! Turning off the Alerts ON for All Medicines would stop alerts and reset the preferences for all medication.</p>
          </div>
        </div>
       <div class="row">
         <div class="col-6">
          <button class="btn btn-secondary" type="button" (click)="CancelReminderOffAll()" 
          style="width: 163px;height: 55px;background: #FFFFFF;border: 2px solid #AFAFAF;box-sizing: border-box;border-radius: 5px;float: right;font-size: 18px;color:#AFAFAF;">Cancel</button>
         </div>
         <div class="col-6">
          <button class="btn btn-secondary" type="button" (click)="ReminderOffAll()" 
          style="width: 163px;height: 55px;left: 610px;top: 418px;border: 2px solid #3182CE;box-sizing: border-box;border-radius: 5px;font-size:18px;color:#3182CE;">Yes, turn off</button>
         </div>
       </div> 
    </div>
  </div>

  <div *ngIf=" !globalAlert " class="modal-body p-3" style="top: 10px;height: 250px;">
    <div class="text-left"> 
      <h4 style="text-align: center;">Turn on Med Alerts for all Medication?</h4> 
       <div class="row">
         <div class="col-12">
           <p style="font-size: 14px;text-align: center;color: #2F855A;padding: 20px 110px 0px 110px;margin: 0px;">This is a global setting to turn on med alerts for all medications that have existing alert preferences which could be pre-populated on your behalf.</p>
           <p style="font-size: 14px;text-align: center;color: #AFAFAF;padding: 0px 110px;">(Some medications may not inherit this setting and may require manual override )</p>
         </div>
       </div>
      <div class="row">
        <div class="col-6">
         <button class="btn btn-secondary" type="button" (click)="CancelReminderOnAll()" 
         style="width: 163px;height: 55px;background: #FFFFFF;border: 2px solid #AFAFAF;box-sizing: border-box;border-radius: 5px;float: right;font-size: 18px;color:#AFAFAF;">Cancel</button>
        </div>
        <div class="col-6">
         <button class="btn btn-secondary" type="button" (click)="ReminderOnAll()" 
         style="width: 163px;height: 55px;background: #3182CE;border: 2px solid #3182CE;box-sizing: border-box;border-radius: 5px;font-size:18px;color:#FFFFFF;">Yes, turn on</button>
        </div>
      </div> 
   </div>
  </div>
</ng-template>  

<ng-template #savesuccesscontent role="document" let-modal="close" id="modal-delete" style="width: 33%;">
  <div class="modal-header bg-dark">
    <h4 class="modal-title text-white">Success message</h4>
    <button type="button" class="close text-white" aria-label="Close" (click)="modal('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3">
    <div class="text-left">
      <form (ngSubmit)="saveData()" [formGroup]="validationform">

        <div class="form-group" style="text-align: center;">
          <!--<i class="fas fa-check-circle" style="font-size: 40px;color:#48BB78;"></i>-->
          <img src="./assets/icon/icon-tick.svg" />

          <br/>
          <label for="email">Reminder Successfully Set </label>
        </div>
 

        <div class="text-right">
          <button type="button" class="btn btn-danger ml-1"
            (click)="modal('close click')">Okay</button>
        </div>
      </form>
    </div>
  </div>
</ng-template>


<ng-template #savefailurecontent role="document" let-modal="close" id="modal-delete" style="width: 33%;">
  <div class="modal-header bg-dark">
    <h4 class="modal-title text-white">Failure message</h4>
    <button type="button" class="close text-white" aria-label="Close" (click)="modal('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3">
    <div class="text-left">
      <form (ngSubmit)="saveData()" [formGroup]="validationform">

        <div class="form-group" style="text-align: center;">
          <!--<i class="fas fa-check-circle" style="font-size: 40px;color:#48BB78;"></i>-->
          <img src="./assets/icon/icon-tick.svg" />

          <br/>
          <label for="email">Reminder Setting Failure, Try Again. </label>
        </div>
 

        <div class="text-right">
          <button type="button" class="btn btn-danger ml-1"
            (click)="modal('close click')">Okay</button>
        </div>
      </form>
    </div>
  </div>
</ng-template>


 
<ng-template #labitemcontent role="document" let-modal="close">
  <div class="modal-header bg-dark">
    <h4 class="modal-title text-white">Lab Report Details</h4>
    <button type="button" class="close text-white" aria-label="Close" (click)="modal('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3" style="background: #fff;min-height: 500px;">
    
    
  <table *ngIf=" loadingData " class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
    <thead>
      <tr>
          <th></th>
          <th>Test Name</th>
          <th>Result</th>
          <th>Result Range</th>                    
          <th></th>
      </tr>
      </thead>

      <tbody>
       
          <tr *ngIf=" lablistMasterData.length == 0 ">
            <td colspan="5">
              <p style="padding: 10px;">No data found.</p>
            </td>
          </tr>

          <tr *ngFor="let resourceItemData of lablistMasterData let i = index;" class="accordion-toggle">
           
              <td>
                 <img src="./assets/icon/report-page-icon.svg" style="width: 30px;padding-left: 10px;" />
              </td> 
              <td>
                <div class="text-body" >
                  <span class="ml-2X">{{resourceItemData.coding.display}}</span>
                </div>
              </td>
              
              <td>
                  <div class="text-body" >
                      <span class="ml-2X">{{resourceItemData.valueQuantity}} {{resourceItemData.loincReference.unit}}</span>
                  </div>
              </td>
              
              

              <td>
                  <div class="text-body" >
                    <a href="javascript:void(0);" class="border-gray">
                      <div class="pull-left">
                      <img src="{{'http://chart.googleapis.com/chart?cht=gom&chs=225x125&chxt=x&chxl=0:%7C&chd=t:' + resourceItemData.ometerValue + '&chco=' + resourceItemData.loincReference.ometerColors + ''}}" style="width: 60px;height: 40px;" />
                      </div>
                    </a>
                  </div>
              </td>    
              <td>
                <div class="text-body" >
         
                  <a href="javascript:void(0);" (click)="labchartModalPopUp(labchartcontent,'diagnosticreport',resourceId,resourceItemData.coding.code)" class="border-gray">
                    <span class="ml-2X"><img src="./assets/icon/report-popup-icon.svg" /></span>
                  </a>

                  
                </div>
            </td>  
          </tr>      
      </tbody>
</table>
  </div>
  <div class="modal-footer bg-dark"> 
    <button type="button"  class="btn btn-primary" style="float: right;margin: 10px 40px 20px 30px;" aria-label="Close" (click)="modal('Cross click')">
      Done 
    </button>
  </div>
</ng-template>



<ng-template #labchartcontent role="document" let-modal="close">
  <div class="modal-header bg-dark">
    <h4 class="modal-title text-white">Lab Report Chart</h4>
    <button type="button" class="close text-white" aria-label="Close" (click)="modal('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3" style="background: #fff;min-height: 500px;margin: 0px !important;padding: 0px !important;">
     
    <div *ngIf="loadingData">
  
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-10" *ngIf="!lablistDataCodeValue" style="margin: 200px 0px 0px 0px;">
        <p style="text-align: center;">No chart available </p>
      </div>
      
      <!--
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-10" *ngIf="!lablistDataCodeValue || lablistDataCodeValue=='' || lablistDataCodeValue=='0' && ChartresourceId !=''" style="margin: 200px 0px 0px 0px;">
        <p style="text-align: center;">No chart available </p>
      </div>
      -->
      <!--
         <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="lablistDataCodeValue && lablistDataCodeValue!='' && RangeDataLow !='' || RangeDataLow =='0'" >
         </div>  
      -->
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="lablistDataCodeValue" >
        
          <!--<div style="height: 60px;" *ngIf="RangeDataLow !='' || RangeDataLow =='0'">
            <span style="float:left;padding: 20px;font-weight: normal;color: blue;" *ngIf="ChartresourceId !=''"><b> Reference Range Low : < {{RangeDataLow}}</b></span>
            <span style="float:left;padding: 20px;font-weight: normal;color: black;" *ngIf="ChartresourceId !=''"><b> Reference Range Normal : {{RangeDataLow}} - {{RangeDataNormal}}</b></span>
            <span style="float:left;padding: 20px;font-weight: normal;color: red;" *ngIf="ChartresourceId !=''"><b> Reference Range High : > {{RangeDataHigh}}</b></span>
          </div>-->

          <div style="height: 60px;" *ngIf="RangeDataLow !='' || RangeDataLow =='0'">
            <span style="float:left;padding: 20px;font-weight: normal;color: blue;" *ngIf="setLowRange"><b> Range Low : {{setLowRangeValue}}</b></span>
            <span style="float:left;padding: 20px;font-weight: normal;color: green;" *ngIf="setNormalRange"><b> Range Normal : {{setNormalRangeValue}}</b></span>
            <span style="float:left;padding: 20px;font-weight: normal;color: red;" *ngIf="setHighRange"><b> Range High : {{setHighRangeValue}}</b></span><span style="float:left;padding: 20px;font-weight: normal;color: goldenrod;" *ngIf="setAcceptRange"><b> Range Accept : {{setAcceptRangeValue}}</b></span>
            <span style="float:left;padding: 20px;font-weight: normal;color: orangered;" *ngIf="setBorderRange"><b> Range Border :  {{setBorderRangeValue}}</b></span>
            <span style="float:left;padding: 20px;font-weight: normal;color: red;" *ngIf="setRiskRange"><b> Range Risk :  {{setRiskRangeValue}}</b></span>
          </div>

          
    
          <div class="welcome-card" style="margin: 0 auto;padding-top:20px;width: 750px;" *ngIf="ChartresourceId !=''" > 
             
              <google-chart [data]="LineChart1"></google-chart>
            
          </div>
        
      </div>
       
    </div>  

  </div>
  <div class="modal-footer bg-dark"> 
    <button type="button"  class="btn btn-primary" style="float: right;margin: 10px 40px 20px 30px;" aria-label="Close" (click)="modal('Cross click')">
      Done 
    </button>
  </div>
</ng-template>


 
<ng-template #visitmodalcontent role="document" let-modal="close">
  <div class="modal-header bg-dark">
    <!--<h4 class="modal-title text-white">Visit Resource Details</h4>-->
    <div *ngIf="resourceVisitTypeValue=='diagnosis'">
      <h4 class="modal-title text-white">Diagnosis</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='visitinfo'">
      <h4 class="modal-title text-white">Visit Information</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='medicationstatement'">
      <h4 class="modal-title text-white">Medications</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='immunizations'">
      <h4 class="modal-title text-white">Immunizations</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='procedures'">
      <h4 class="modal-title text-white">Procedures</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='vitals'">
      <h4 class="modal-title text-white">Vitals</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='laboratory'">
      <h4 class="modal-title text-white">Lab Reports</h4>
    </div>      
    <div *ngIf="resourceVisitTypeValue=='diagnosticreport'">
      <h4 class="modal-title text-white">Lab Report Details</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='diagnostic'">
      <h4 class="modal-title text-white">Diagnostic Report</h4>
    </div>      
    <div *ngIf="resourceVisitTypeValue=='dischargesummary'">
      <h4 class="modal-title text-white">Discharge Summary</h4>
    </div>
    <div *ngIf="resourceVisitTypeValue=='conditions'">
      <h4 class="modal-title text-white">Conditions</h4>
    </div>

    <button type="button" class="close text-white" aria-label="Close" (click)="modal('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3" style="background: #fff;min-height: 500px;">
  
  <div id="dataarea" *ngIf="loadingData">
    
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" style="padding: 10px;" *ngIf="resourceVisitTypeValue!='visitinfo' && EncounterDataArray.category != '' &&  EncounterDataArray.category != 'None'  " >
  <div class="home-data-top-box" style="height: 50px;min-height: 50px;" >      
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox" style="padding: 12px 0px;">
      <b>{{EncounterDataArray.category}}</b> visit on <b>{{EncounterDataArray.resourceDate}}</b> at <b>{{EncounterDataArray.entityName}}</b>
    </div>
  </div>    
</div>

<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='diagnosis'">
 
  <div class="home-data-top-box" >
                     
    <div *ngFor="let data of EncounterData;let i=index;" style="padding-top: 30px;">
        <div class="row" style="width: 100%;padding: 0px;margin: 0px;">
 
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
              <div class="vinfo" style="width:100%;" >
              <p *ngIf=" EncounterDataArray.reason != '' ">{{EncounterDataArray.reason}}</p>  
              <p *ngIf=" EncounterDataArray.reason == '' ">No diagnosis available for this visit</p>                
             </div>
            </div> 
            
        </div>
    </div> 
                  
</div>

</div>  
  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='visitinfo'">

    <div class="home-data-top-box" *ngIf=" encounterResourceDataCount > 0 " >
                     
        <div *ngFor="let data of EncounterData;let i=index;" style="padding-top: 30px;">
            <div class="row" style="width: 100%;padding: 0px;margin: 0px;">

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
                <p>{{data.category}}</p>                    
              </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
                    <div class="vinfo" ><span>Visit Date:&nbsp; </span> {{data.resourceDate}}</div>
                    <!--<div class="vinfo" ><span>Visit Category:&nbsp; </span> {{data.category}}</div>-->
                    <!--
                    <div class="vinfo" *ngIf=" data.category != 'Inpatient' "><span>Visit Category:&nbsp; </span> Outpatient </div>
                    <div class="vinfo" *ngIf=" data.category == 'Inpatient' "><span>Visit Category:&nbsp; </span> Inpatient </div>
                    -->
                    <div class="vinfo" ><span>Hospital Name:&nbsp; </span> {{data.entityName}}</div>
                    <div class="vinfo" ><span>Doctor Name:&nbsp; </span> {{data.practitioner}}</div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
                  <div class="vinfo" style="width:100%;" ><span>Diagnosis:&nbsp; </span>  
                  <p *ngIf=" data.reason != '' ">{{data.reason}}</p>  
                  <p *ngIf=" data.reason == '' ">No diagnosis available for this visit</p>                
                 </div>
                </div> 
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfoboxlink"> 
 
               
              <div class=" vinfoboxlink" *ngIf=" data.associatedResources.length > 0 ">
                
                <span *ngIf="data.associatedResources.indexOf('Diagnosis') > -1" (click)="visitModalPopUp(visitmodalcontent,'diagnosis', data.resourceId)"> Diagnosis </span>
                <span *ngIf="data.associatedResources.indexOf('Diagnosis') == -1" (click)="visitModalPopUp(visitmodalcontent,'diagnosis', data.resourceId)"> Diagnosis </span>

                <span *ngIf="data.associatedResources.indexOf('Laboratory') > -1" (click)="visitModalPopUp(visitmodalcontent,'laboratory', data.resourceId)"> Lab Report </span>
                <span *ngIf="data.associatedResources.indexOf('Laboratory') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Lab Report </span>

                <span *ngIf="data.associatedResources.indexOf('Procedure') > -1" (click)="visitModalPopUp(visitmodalcontent,'procedures', data.resourceId)"> Procedure </span>
                <span *ngIf="data.associatedResources.indexOf('Procedure') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Procedure </span>

                <span *ngIf="data.associatedResources.indexOf('Medication') > -1" (click)="visitModalPopUp(visitmodalcontent,'medicationstatement', data.resourceId)"> Medications </span>
                <span *ngIf="data.associatedResources.indexOf('Medication') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Medications </span>

                <span *ngIf="data.category=='Inpatient'" style="border: none;padding: 0px;">  
                  <span *ngIf="data.associatedResources.indexOf('DocumentReference') > -1" (click)="visitModalPopUp(visitmodalcontent,'dischargesummary', data.resourceId)"> Discharge Summary </span>
                  <span *ngIf="data.associatedResources.indexOf('DocumentReference') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Discharge Summary </span>
                </span>
                
                <span *ngIf="data.category!='Inpatient'" style="border: none;padding: 0px;">  
                  <span *ngIf="data.associatedResources.indexOf('Notes') > -1" (click)="visitModalPopUp(visitmodalcontent,'dischargesummary', data.resourceId)"> Notes </span>
                  <span *ngIf="data.associatedResources.indexOf('Notes') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Notes </span>
                </span>

                <span *ngIf="data.associatedResources.indexOf('Vital Signs') > -1" (click)="visitModalPopUp(visitmodalcontent,'vitals', data.resourceId)"> Vitals </span>
                <span *ngIf="data.associatedResources.indexOf('Vital Signs') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Vitals </span>
                
                <!--<span *ngIf="data.associatedResources.indexOf('Condition') > -1" (click)="visitModalPopUp(visitmodalcontent,'conditions', data.resourceId)"> Conditions </span>
                <span *ngIf="data.associatedResources.indexOf('Condition') == -1" (click)="visitModalPopUp(visitmodalcontent,'conditions', data.resourceId)"> Conditions </span>-->

                <!--<span *ngIf="data.associatedResources.indexOf('DiagnosticReport') > -1" (click)="visitModalPopUp(visitmodalcontent,'diagnostic', data.resourceId)"> Diagnostic Report</span>
                <span *ngIf="data.associatedResources.indexOf('DiagnosticReport') == -1" (click)="visitModalPopUp(visitmodalcontent,'diagnostic', data.resourceId)"> Diagnostic Report</span>-->

                <!--<span *ngIf="data.associatedResources.indexOf('Immunization') > -1" (click)="visitModalPopUp(visitmodalcontent,'immunizations', data.resourceId)"> Immunizations </span>             
                <span *ngIf="data.associatedResources.indexOf('Immunization') == -1" (click)="visitModalPopUp(visitmodalcontent,'immunizations', data.resourceId)"> Immunizations </span>-->             
              </div>
                <div class=" vinfoboxlink" *ngIf=" data.associatedResources.length == 0 ">
                    <!--<span style="color: #ccc;border: none;" >No visit data available</span>-->

                    
                    <span (click)="visitModalPopUp(visitmodalcontent,'diagnosis', data.resourceId)"> Diagnosis</span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Lab Report </span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Procedure </span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Medications </span>

                    <span *ngIf="data.category=='Inpatient'" style="border: none;padding: 0px;">  
                      <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Discharge Summary </span>
                    </span>
                     <span *ngIf="data.category!='Inpatient'" style="border: none;padding: 0px;">  
                      <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Notes </span>
                    </span>
                    
                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Vitals </span>


                </div>

                </div>
            </div>
        </div> 
                    	
    </div>

  </div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='medicationstatement'">
    
<!--
<table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
</table>
-->
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
        <thead>
        <tr>
            <th></th>
            <th>Medication Name</th>
            <th>Medication Dosage</th>
           <!--
            <th>Medication Date</th>                    
           --> 
            <th>Medication Frequency</th>
        </tr>
        </thead>

        <tbody>
            <tr *ngFor="let resourceItemData of MedicationDataArray let i = index;" [ngClass]="(resourceItemData.status=='active')?'activerow':'completedrow'" >
            
                <td>
                    <!--<b>{{i+1}}</b>-->
                    <img src="./assets/icon/medication-page-icon.svg" style="width: 30px;padding-left: 10px;" />
                </td>
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.medication}}</span>
                    </div>
                </td>

                <td>
                    <div class="text-body">
                        <span class="ml-2x">{{resourceItemData.dosageQuantity}} {{resourceItemData.dosageUnit}} </span>
                    </div>
                </td>
                <!--
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.resourceDate}}</span>
                    </div>
                </td>
                -->

                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.patientInstruction}}</span>
                    </div>
                </td>    
            </tr>     

        </tbody>
    </table>

</div>


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='procedures'">
    
<!--
  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
  </table>
-->

  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
      <thead>
      <tr>
          <th></th>
          <th>Procedure Name</th>
          <!--
            <th>Report Date</th>                    
          -->
          <th>Hospital Name</th>
      </tr>
      </thead>

      <tbody>
          <tr *ngFor="let resourceItemData of ProcedureDataArray let i = index;">
          
              <td>
                  <!--<b>{{i+1}}</b>-->
                  <img src="./assets/icon/procedure-page-icon.svg" style="width: 30px;padding-left: 10px;" />
              </td>
              <td>
                  <div class="text-body" >
                      <span class="ml-2x">{{resourceItemData.procedureName}}</span>
                      <br/>
                      <span class="ml-2x">{{resourceItemData.reason}}</span>
                   </div>
              </td>
              <!--
              <td>
                  <div class="text-body" >
                      <span class="ml-2x">{{resourceItemData.resourceDate}}</span>
                  </div>
              </td>
              -->
              <td>
                  <div class="text-body" >
                      <span class="ml-2x">{{resourceItemData.entityName}}</span>
                  </div>
              </td>    
          </tr>     

      </tbody>
  </table>

</div>


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='laboratory'">

  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
    <thead>
    <tr>
        <th>Report Details</th>
    </tr>
    </thead>

    <tbody>
      <tr *ngIf=" LaboratoryDataCount == 0 ">
        <td>
          <p style="padding: 10px;">No data found.</p>
        </td>        
      </tr>
      <tr *ngFor="let resourceItemData of LaboratoryDataArray let i = index;">
        
            <td> 
              <!--
              <div class="text-body" style="cursor: pointer;" (click)="showVisitDetailModal('diagnosticreport',resourceItemData.resourceId)">
                <span class=""> 
                    <img src="./assets/icon/report-page-icon.svg" width="32" height="32" class="img-thumbnail" alt="{{resourceItemData.class}}"> &nbsp;&nbsp;
                </span>
                <span class="ml-2x">{{resourceItemData.coding.display}}</span>
              </div>
              -->
              <div class="text-body" style="cursor: pointer;" (click)="labModalPopUp(labitemcontent, 'diagnosticreport',resourceItemData.resourceId)">
                <span class=""> 
                    <img src="./assets/icon/report-page-icon.svg" width="32" height="32" class="img-thumbnail" alt="{{resourceItemData.class}}"> &nbsp;&nbsp;
                </span>
                <span class="ml-2x">{{resourceItemData.coding.display}}</span>
              </div>

              
            </td> 
        </tr>     

    </tbody>
</table>
 
  
  </div>
  
  
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='diagnosticreport'">
   
  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
    <thead>
      <tr>
          <th></th>
          <th>Test Name</th>
          <th>Result</th>
          <th>Result Range</th>                    
          <th></th>
      </tr>
      </thead>

      <tbody>
          <tr *ngIf=" data.length == 0 ">
            <td colspan="5">
              <p style="padding: 10px;">No data found.</p>
            </td>
          </tr>
          <tr *ngFor="let resourceItemData of data let i = index;" class="accordion-toggle">
          
              <td>
                <!--<b>{{i+1}}</b>-->
                <img src="./assets/icon/report-page-icon.svg" style="width: 30px;padding-left: 10px;" />
              </td> 
              <td>
                <div class="text-body" >
                  <span class="ml-2x">{{resourceItemData.coding.display}}</span>
                </div>
              </td>
              
              <td>
                  <div class="text-body" >
                      <span class="ml-2x">{{resourceItemData.valueQuantity}} {{resourceItemData.loincReference.unit}}</span>
                  </div>
              </td>
              
              

              <td>
                  <div class="text-body" >
                    <a href="javascript:void(0);" (click)="showChartPage('chartview',resourceType,resourceId,resourceItemData.coding.code)" class="border-gray">
                      <div class="pull-left">
                      <img src="{{'http://chart.googleapis.com/chart?cht=gom&chs=225x125&chxt=x&chxl=0:%7C&chd=t:' + resourceItemData.ometerValue + '&chco=' + resourceItemData.loincReference.ometerColors + ''}}" style="width: 60px;height: 40px;" />
                      </div>
                    </a>
                  </div>
              </td>    
              <td>
                <div class="text-body" >
                <!--
                  <a href="javascript:void(0);" (click)="showChartPage('chartview',resourceType,resourceId,resourceItemData.coding.code)" class="border-gray">
                    <span class="ml-2x"><img src="./assets/icon/report-popup-icon.svg" /></span>
                  </a>
                  <br/>
                -->
                  <a href="javascript:void(0);" (click)="showModal(resourceType,resourceId,resourceItemData.coding.code)" class="border-gray">
                    <span class="ml-2x"><img src="./assets/icon/report-popup-icon.svg" /></span>
                  </a>

                  
                </div>
            </td>
          </tr>     
           
      </tbody>
</table>
 
  
  </div>
  
  
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='diagnostic'">
   
  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
    <thead>
      <tr>
          <th></th>
          <th>Test Name</th>
          <th>Result</th>
          <th>Result Range</th>                    
          <th></th>
      </tr>
      </thead>

      <tbody> 
        <tr>
          <td colspan="4">
            <span style="color: #ccc;border: none;" >No diagnostic report data available</span>
          </td>
        </tr>
           
      </tbody>
</table>
 
  
  </div>
  

<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='vitals'">
     
<!--
  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
  </table>
-->

  <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
      <thead>
      <tr>
          <th></th>
          <th>Vital Name</th>
          <th>Value</th>
          <!--
          <th>Date</th>
          <th>Hospital Name</th>
          -->
      </tr>
      </thead>

      <tbody>
          <tr *ngFor="let resourceItemDataArray of VitalDataArray let i = index;">
          
              <td>
                  
                <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Height'">
                  <img src="./assets/sh360/height-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Body height'">
                  <img src="./assets/sh360/height-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                      
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Body weight'">
                  <img src="./assets/sh360/weight-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Weight'">
                  <img src="./assets/sh360/weight-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Temp'">
                  <img src="./assets/sh360/temp-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Body Temperature'">
                  <img src="./assets/sh360/temp-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Pulse'">
                  <img src="./assets/sh360/heart-vital.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Heart Rate'">
                  <img src="./assets/sh360/heart-vital.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                          
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Resp'">
                  <img src="./assets/sh360/respiratory-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Respiratory Rate'">
                  <img src="./assets/sh360/respiratory-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>

                    
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'BP'">
                  <img src="./assets/sh360/blood-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Blood pressure Systolic and Diastolic'">
                      <img src="./assets/sh360/blood-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>

                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'SpO2'">
                  <img src="./assets/sh360/mh-icon-spo2.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Oxygen saturation'">
                  <img src="./assets/sh360/mh-icon-spo2.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                  
                  <div class="pull-left" *ngIf=" resourceItemDataArray.observationName == 'Body Mass Index (BMI)'">
                  <img src="./assets/sh360/bmi-vitals.png" width="34" height="34" class="img-thumbnail" alt="{{resourceItemDataArray.observationName}}" />
                  </div>
                      

              </td>    
              <td>
                <div class="text-body" >
                  <span class="ml-2x">{{resourceItemDataArray.observationName}}</span>
                </div>
              </td>
              <td>
                

                <div class="text-body" >
                    <span class="ml-2x" *ngFor="let datar of resourceItemDataArray.readings;let r=index;">
                    {{datar.componentValue}} {{datar.componentUnit}}
                    </span>
                </div>
              </td>
              
              <!--
              <td>
                <div class="text-body" >
                  <span class="ml-2x">{{resourceItemDataArray.resourceDate}}</span>
                </div>
              </td>              
              <td>
                <div class="text-body" >
                  <span class="ml-2x">{{resourceItemDataArray.entityName}}</span>
                </div>
              </td>
              -->
          </tr>     

      </tbody>
  </table>
</div>
 


<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='dischargesummary'">
     
  <!--
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
    </table>
  -->
  <!--
    <tr *ngFor="let resourceItemDataArray of DocumentReferenceDataArray let i = index;"></tr>
  -->
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
        <tbody>
          <tr *ngFor="let resourceItemDataArray of DocumentReferenceDataArray let i = index;">
          <!--
            {{DocumentReferenceDataURL}}
            {{BaseURL}}/patient/attachment?patientId={{patientId}}&resourceId={{resourceItemDataArray.resourceId}}
          --> 
            <iframe [src]="urlSafe" style="width: 100%; height: 420px; overflow: scroll;"
                frameborder="0"
                webkitallowfullscreen
                mozallowfullscreen
                allowfullscreen
                ></iframe>
                
            
          </tr>
          <!--
            <tr>
               <td>
                <iframe src="http://18.213.144.230:11001/api/patient/attachment?patientId=7b8f7f84-ed29-49d8-a942-7aa8bc3ab321&resourceId=2641617" style="width: 100%; height: 420px; overflow: scroll;"
                  frameborder="0"
                  webkitallowfullscreen
                  mozallowfullscreen
                  allowfullscreen
                  ></iframe>
                </td>
            </tr>  
          -->   
  
        </tbody>
    </table>
  </div>

  
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='conditions'">
    
  <!--
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
    </table>
  -->
  
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
        <thead>
        <tr>
            <th></th>
            <th>Condition Name</th>
            <!--
              <th>Report Date</th>                    
            -->
            <th>Hospital Name</th>
        </tr>
        </thead>
  
        <tbody>
            <tr *ngFor="let resourceItemData of ProcedureDataArray let i = index;">
            
                <td>
                    <!--<b>{{i+1}}</b>-->
                    <img src="./assets/icon/procedure-page-icon.svg" style="width: 30px;padding-left: 10px;" />
                </td>
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.conditionName}}</span>
                        <br/>
                        <span class="ml-2x">{{resourceItemData.notes}}</span>
                     </div>
                </td>
                <!--
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.resourceDate}}</span>
                    </div>
                </td>
                -->
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.entityName}}</span>
                    </div>
                </td>    
            </tr>     
  
        </tbody>
    </table>
  
  </div>

  
<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30" *ngIf="resourceVisitTypeValue=='immunizations'">
    
  <!--
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
    </table>
  -->
  
    <table class="table table-hover m-0 table-centered dt-responsive nowrap w-100" id="tickets-table" >
        <thead>
        <tr>
            <th></th>
            <th>Name</th>
            <!--
              <th>Date</th>                    
            -->
            <th>Administered By</th>
        </tr>
        </thead>
  
        <tbody>
            <tr *ngFor="let resourceItemData of ProcedureDataArray let i = index;">
            
                <td>
                    <!--<b>{{i+1}}</b>-->
                    <img src="./assets/icon/immunization-page-icon.svg" style="width: 30px;padding-left: 10px;" />
                </td>
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.immunizationCode}}</span>
                        <br/>
                        <span class="ml-2x">{{resourceItemData.notes}}</span>
                     </div>
                </td>
                <!--
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.resourceDate}}</span>
                    </div>
                </td>
                -->
                <td>
                    <div class="text-body" >
                        <span class="ml-2x">{{resourceItemData.entityName}}</span>
                    </div>
                </td>    
            </tr>     
  
        </tbody>
    </table>
  
  </div>

  </div>

  </div>
  <div class="modal-footer bg-dark"> 
    <button type="button"  class="btn btn-primary" style="float: right;margin: 10px 40px 20px 30px;" aria-label="Close" (click)="modal('Cross click')">
      Done 
    </button>
  </div>
</ng-template>


<ng-template #visitinfomodalcontent role="document" let-modal="close">
  <div class="modal-header bg-dark">
      <h4 class="modal-title text-white">Visit Information</h4>
    <button type="button" class="close text-white" aria-label="Close" (click)="modal('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body p-3" style="background: #fff;min-height: 500px;">
  
  <div id="dataarea" *ngIf="loadingVisitInfoData">
     

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pad-left-0 ma-top-30">
 
    <div class="home-data-top-box" *ngIf=" visitdetailinfoResourceDataCount > 0 " >
                     
        <div *ngFor="let data of VisitDetailInfoData;let i=index;" style="padding-top: 30px;">
            <div class="row" style="width: 100%;padding: 0px;margin: 0px;">

              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
                <p>{{data.category}}</p>                
              </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
                    <div class="vinfo" ><span>Visit Date:&nbsp; </span> {{data.resourceDate}}</div>
                    <!--<div class="vinfo" ><span>Visit Category:&nbsp; </span> {{data.category}}</div>-->
                    <!--
                    <div class="vinfo" *ngIf=" data.category != 'Inpatient' "><span>Visit Category:&nbsp; </span> Outpatient </div>
                    <div class="vinfo" *ngIf=" data.category == 'Inpatient' "><span>Visit Category:&nbsp; </span> Inpatient </div>
                    -->
                    <div class="vinfo" ><span>Hospital Name:&nbsp; </span> {{data.entityName}}</div>
                    <div class="vinfo" ><span>Doctor Name:&nbsp; </span> {{data.practitioner}}</div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfobox">
                  <div class="vinfo" style="width:100%;"><span>Diagnosis:&nbsp; </span>  
                    <p *ngIf=" data.reason != '' ">{{data.reason}}</p>  
                    <p *ngIf=" data.reason == '' ">No diagnosis available for this visit</p>                
                   </div>              
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 vinfoboxlink"> 
 

              <div class=" vinfoboxlink" *ngIf=" data.associatedResources.length > 0 ">
                
                <span *ngIf="data.associatedResources.indexOf('Diagnosis') > -1" (click)="visitModalPopUp(visitmodalcontent,'diagnosis', data.resourceId)"> Diagnosis </span>
                <span *ngIf="data.associatedResources.indexOf('Diagnosis') == -1" (click)="visitModalPopUp(visitmodalcontent,'diagnosis', data.resourceId)"> Diagnosis </span>

                <span *ngIf="data.associatedResources.indexOf('Laboratory') > -1" (click)="visitModalPopUp(visitmodalcontent,'laboratory', data.resourceId)"> Lab Report </span>
                <span *ngIf="data.associatedResources.indexOf('Laboratory') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Lab Report </span>

                <span *ngIf="data.associatedResources.indexOf('Procedure') > -1" (click)="visitModalPopUp(visitmodalcontent,'procedures', data.resourceId)"> Procedure </span>
                <span *ngIf="data.associatedResources.indexOf('Procedure') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Procedure </span>

                <span *ngIf="data.associatedResources.indexOf('Medication') > -1" (click)="visitModalPopUp(visitmodalcontent,'medicationstatement', data.resourceId)"> Medications </span>
                <span *ngIf="data.associatedResources.indexOf('Medication') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Medications </span>

                <span *ngIf="data.category=='Inpatient'" style="border: none;padding: 0px;">  
                  <span *ngIf="data.associatedResources.indexOf('DocumentReference') > -1" (click)="visitModalPopUp(visitmodalcontent,'dischargesummary', data.resourceId)"> Discharge Summary </span>
                  <span *ngIf="data.associatedResources.indexOf('DocumentReference') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Discharge Summary </span>
                </span>
                
                <span *ngIf="data.category!='Inpatient'" style="border: none;padding: 0px;">  
                  <span *ngIf="data.associatedResources.indexOf('Notes') > -1" (click)="visitModalPopUp(visitmodalcontent,'dischargesummary', data.resourceId)"> Notes </span>
                  <span *ngIf="data.associatedResources.indexOf('Notes') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Notes </span>
                </span>

                <span *ngIf="data.associatedResources.indexOf('Vital Signs') > -1" (click)="visitModalPopUp(visitmodalcontent,'vitals', data.resourceId)"> Vitals </span>
                <span *ngIf="data.associatedResources.indexOf('Vital Signs') == -1" style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Vitals </span>
                
                <!--<span *ngIf="data.associatedResources.indexOf('Condition') > -1" (click)="visitModalPopUp(visitmodalcontent,'conditions', data.resourceId)"> Conditions </span>
                <span *ngIf="data.associatedResources.indexOf('Condition') == -1" (click)="visitModalPopUp(visitmodalcontent,'conditions', data.resourceId)"> Conditions </span>-->

                <!--<span *ngIf="data.associatedResources.indexOf('DiagnosticReport') > -1" (click)="visitModalPopUp(visitmodalcontent,'diagnostic', data.resourceId)"> Diagnostic Report</span>
                <span *ngIf="data.associatedResources.indexOf('DiagnosticReport') == -1" (click)="visitModalPopUp(visitmodalcontent,'diagnostic', data.resourceId)"> Diagnostic Report</span>-->

                <!--<span *ngIf="data.associatedResources.indexOf('Immunization') > -1" (click)="visitModalPopUp(visitmodalcontent,'immunizations', data.resourceId)"> Immunizations </span>             
                <span *ngIf="data.associatedResources.indexOf('Immunization') == -1" (click)="visitModalPopUp(visitmodalcontent,'immunizations', data.resourceId)"> Immunizations </span>-->             
              </div>
                <div class=" vinfoboxlink" *ngIf=" data.associatedResources.length == 0 ">
                    <!--<span style="color: #ccc;border: none;" >No visit data available</span>-->

                    
                    <span (click)="visitModalPopUp(visitmodalcontent,'diagnosis', data.resourceId)"> Diagnosis</span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Lab Report </span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Procedure </span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Medications </span>

                    <span *ngIf="data.category=='Inpatient'" style="border: none;padding: 0px;">  
                      <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Discharge Summary </span>
                    </span>
                     <span *ngIf="data.category!='Inpatient'" style="border: none;padding: 0px;">  
                      <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Notes </span>
                    </span>

                    <span style="color: #aeaeae;border: 1px solid #aeaeae;cursor: default;"> Vitals </span>

                </div>

                </div>
            </div>
        </div> 
                    	
    </div>

  </div>
 
  </div>

  </div>
  <div class="modal-footer bg-dark"> 
    <button type="button"  class="btn btn-primary" style="float: right;margin: 10px 40px 20px 30px;" aria-label="Close" (click)="modal('Cross click')">
      Done 
    </button>
  </div>
</ng-template>

<style>
  
div.dataTables_length {
  display: none !important;
}

div.dataTables_info {
  display: none !important;
}

div.dataTables_paginate {
  display: none !important;
}
</style>